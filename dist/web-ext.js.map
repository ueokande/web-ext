{"version":3,"sources":["webpack:///webpack/bootstrap 9f440c76676cd5bd8764","webpack:///./src/util/logger.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack:///./src/errors.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///external \"path\"","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///external \"mz\"","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///external \"es6-promisify\"","webpack:///./src/util/manifest.js","webpack:///./src/firefox/remote.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_new-promise-capability.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///external \"fs\"","webpack:///./src/cmd/build.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./src/util/file-filter.js","webpack:///./src/util/desktop-notifier.js","webpack:///./src/firefox/index.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/core-js/library/modules/_species-constructor.js","webpack:///./node_modules/core-js/library/modules/_task.js","webpack:///./node_modules/core-js/library/modules/_perform.js","webpack:///./node_modules/core-js/library/modules/_promise-resolve.js","webpack:///external \"os\"","webpack:///external \"camelcase\"","webpack:///./src/cmd/index.js","webpack:///external \"parse-json\"","webpack:///external \"event-to-promise\"","webpack:///./src/watcher.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./src/util/artifacts.js","webpack:///./src/util/adb.js","webpack:///./src/firefox/preferences.js","webpack:///external \"readline\"","webpack:///external \"tty\"","webpack:///./src/util/temp-dir.js","webpack:///./src/main.js","webpack:///./src/program.js","webpack:///external \"regenerator-runtime\"","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/babel-runtime/core-js/promise.js","webpack:///./node_modules/core-js/library/fn/promise.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/modules/es6.promise.js","webpack:///./node_modules/core-js/library/modules/_an-instance.js","webpack:///./node_modules/core-js/library/modules/_for-of.js","webpack:///./node_modules/core-js/library/modules/_invoke.js","webpack:///./node_modules/core-js/library/modules/_microtask.js","webpack:///./node_modules/core-js/library/modules/_redefine-all.js","webpack:///./node_modules/core-js/library/modules/_set-species.js","webpack:///./node_modules/core-js/library/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/library/modules/es7.promise.try.js","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///external \"git-rev-sync\"","webpack:///external \"yargs\"","webpack:///external \"watchpack\"","webpack:///external \"debounce\"","webpack:///external \"bunyan\"","webpack:///./src/util/zip-dir.js","webpack:///external \"zip-dir\"","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///external \"es6-error\"","webpack:///external \"mkdirp\"","webpack:///external \"minimatch\"","webpack:///./src/cmd/lint.js","webpack:///external \"addons-linter\"","webpack:///./src/cmd/run.js","webpack:///external \"adbkit\"","webpack:///external \"node-notifier\"","webpack:///external \"fx-runner\"","webpack:///external \"firefox-profile\"","webpack:///./src/util/is-directory.js","webpack:///external \"node-firefox-connect\"","webpack:///./src/extension-runners/index.js","webpack:///./src/extension-runners/firefox-desktop.js","webpack:///./src/extension-runners/firefox-android.js","webpack:///external \"net\"","webpack:///external \"tmp\"","webpack:///./src/cmd/sign.js","webpack:///external \"sign-addon\"","webpack:///./src/cmd/docs.js","webpack:///external \"open\"","webpack:///./src/util/updates.js","webpack:///external \"update-notifier\"","webpack:///./src/config.js","webpack:///external \"require-uncached\"","webpack:///external \"decamelize\"","webpack:///./src/util/file-exists.js"],"names":["createLogger","ConsoleStream","verbose","isCapturing","capturedMessages","name","msg","level","prefix","packet","localProcess","process","thisLevel","TRACE","INFO","format","push","stdout","write","consoleStream","filename","createBunyanLog","replace","streams","type","stream","onlyInstancesOf","onlyErrorsWithCode","isErrorWithCode","WebExtError","message","UsageError","InvalidManifest","RemoteTempInstallNotSupported","MultiExtensionsReloadError","errorsMap","errors","sourceDir","error","String","errorsBySourceDir","predicate","errorHandler","codeWanted","throwError","Array","isArray","indexOf","code","errno","getManifestId","log","__filename","manifestFile","join","debug","manifestContents","readFile","manifestData","version","applications","gecko","length","getValidatedManifest","id","undefined","port","REMOTE_PORT","connectToFirefox","client","RemoteFirefox","connect","maxRetries","retryInterval","retries","Promise","resolve","setTimeout","lastError","stack","establishConnection","connectWithMaxRetries","checkedForAddonReloading","on","info","JSON","stringify","disconnect","addon","request","reject","makeRequest","to","actor","response","addonPath","tabsResponse","addonsActor","installResponse","addonId","addons","then","map","a","addonRequest","requestTypes","supportedRequestTypes","getInstalledAddon","checkForAddonReloading","Date","toTimeString","messageFile","messageData","messageContents","extensionName","match","messageName","getDefaultLocalizedName","fileFilter","artifactsDir","overwriteDest","showReadyMessage","eventToPromise","filter","wantFile","buffer","default_locale","packageName","safeFileName","extensionPath","flags","end","defaultPackageCreator","toLowerCase","asNeeded","ignoreFiles","createFileFilter","onSourceChange","packageCreator","rebuildAsNeeded","createPackage","result","onChange","catch","shouldWatchFile","build","isSubPath","src","target","relate","relative","startsWith","sep","FileFilter","baseIgnoredPatterns","filesToIgnore","addToIgnoreList","file","resolvedPath","files","resolveWithSourceDir","filePath","test","params","showDesktopNotification","defaultLog","title","icon","notifier","notify","err","res","portToTry","retriesLeft","defaultRemotePortFinder","profile","fxRunner","findRemotePort","firefoxBinary","binaryArgs","path","remotePort","env","defaultFirefoxEnv","results","firefox","binary","args","stderr","data","toString","trim","debuggerPort","run","profilePathOrName","ProfileFinder","Finder","fsStat","stat","DEFAULT_PROFILES_NAMES","includes","baseProfileDir","locateUserDirectory","profilesIniPath","finder","readProfiles","normalizedProfileDirPath","normalize","profiles","Name","Default","profileFullPath","IsRelative","Path","isDefaultProfile","profilePath","app","configureThisProfile","configureProfile","isFirefoxDefaultProfile","customPrefs","isForbiddenProfile","destinationDirectory","useProfile","createProfile","profileDirectory","copyFromUserProfile","copy","copyByName","dirExists","copyProfile","asProxy","extensionsDir","mkdir","isDir","destPath","writeStream","createWriteStream","readStream","createReadStream","pipe","all","installExtension","XPCOM_DEBUG_BREAK","NS_TRACE_MALLOC_DISABLE_STACKS","getPrefs","prefs","Object","keys","forEach","pref","setPreference","customPrefsStr","custom","updatePreferences","lint","sign","docs","proxyFileChanges","watcher","executeImmediately","watch","now","close","asyncMkdirp","defaultAsyncMkdirp","stats","isDirectory","access","W_OK","prepareArtifactsDir","asyncFn","wrapADBCall","ADBUtils","adb","adbBin","adbHost","adbPort","adbClient","createClient","bin","host","artifactsDirMap","Map","userAbortDiscovery","deviceId","cmd","shell","util","readAll","devices","listDevices","dev","runShellCommand","pmList","split","line","androidVersion","androidVersionNumber","parseInt","isNaN","apk","permissions","permissionsMap","perm","pmDumpLogs","get","testDirOut","set","delete","localPath","devicePath","transfer","deviceProfileDir","startActivity","wait","action","component","extras","key","value","maxDiscoveryTime","rdpUnixSockets","discoveryStartedAt","endsWith","pop","remote","local","forward","coerceCLICustomPreference","nonOverridablePreferences","prefsCommon","prefsFennec","prefsFirefox","common","fennec","appPrefs","cliPrefs","prefsAry","slice","warn","withTempDir","makePromise","tmpDir","TempDir","create","successHandler","_path","_removeTempDir","createTempDir","dir","multiArgs","unsafeCleanup","tmpPath","removeTempDir","Error","remove","promiseResult","logger","main","defaultVersionGetter","envPrefix","Program","argv","absolutePackageDir","cwd","yargsInstance","verboseEnabled","shouldExitProgram","yargs","strict","commands","options","description","executor","commandOptions","command","yargsForCmd","demandCommand","exitProcess","global","demand","logStream","makeVerbose","checkForUpdates","systemProcess","getVersion","applyConfigToArgv","discoverConfigFiles","loadJSConfigFile","globalEnv","_","runCommand","enableVerboseMode","adjustedArgv","configFiles","configDiscovery","discoveredConfigs","config","niceFileList","f","homedir","configFileName","configObject","argvFromCLI","exit","packageData","parse","branch","long","runOptions","program","usage","help","alias","setGlobalOptions","describe","default","requiresArg","coerce","p","choices","execute","zipDir","boring","metadata","output","pretty","selfHosted","warningsAsErrors","createLinter","linter","logLevel","Boolean","shouldScanFile","fileName","runAsBinary","defaultFirefoxApp","browserConsole","firefoxProfile","keepProfileChanges","noInput","noReload","preInstall","startUrl","adbDevice","firefoxApk","buildExtension","desktopNotifications","firefoxApp","firefoxClient","reloadStrategy","FirefoxAndroidExtensionRunner","FirefoxDesktopExtensionRunner","MultiExtensionRunner","extensions","runners","commonRunnerParams","firefoxDesktopRunnerParams","firefoxDesktopRunner","firefoxAndroidRunnerParams","buildSourceDir","extensionSourceDir","tmpArtifactsDir","firefoxAndroidRunner","extensionRunner","defaultWatcherCreator","defaultReloadStrategy","extensionRunners","promises","runner","reloadPromise","reloadAllExtensions","runnerName","getName","reloadError","handleReloadResults","reloadExtensionBySourceDir","cleanupCallback","registerCleanup","reloadExtension","createWatcher","stdin","kill","allowInput","watchedSourceDir","pause","isTTY","ReadStream","emitKeypressEvents","setRawMode","keypressUsageInfo","userExit","once","str","keyPressed","ctrl","pid","reloadableExtensions","cleanupCallbacks","Set","setupProfileDir","startFirefoxInstance","reloadErrors","size","remoteFirefox","reloadAddon","fn","add","runningInfo","extension","urls","url","cleanupCb","installTemporaryAddon","installResult","adbExtensionsPathBySourceDir","printIgnoredParamsWarnings","adbUtils","adbDevicesDiscoveryAndSelect","apkPackagesDiscoveryAndSelect","adbCheckRuntimePermissions","adbForceStopSelectedPackage","adbPrepareProfileDir","adbStartSelectedPackage","buildAndPushExtensions","adbDiscoveryAndForwardRDPUnixSocket","rdpInstallExtensions","buildAndPushExtension","selectedAdbDevice","selectedArtifactsDir","exiting","clearArtifactsDir","discoverDevices","devicesMsg","foundDevices","device","discoverInstalledFirefoxAPKs","packages","pkgsListMsg","pkgs","pkg","selectedFirefoxApk","filteredPackages","pkgsList","amForceStopAPK","getAndroidVersionNumber","Number","ensureRequiredAPKRuntimePermissions","getOrCreateArtifactsDir","getDeviceProfileDir","pushFile","profileDir","startFirefoxAPK","extFileName","basename","adbExtensionPath","firefoxAndroidTimeout","unixSocketDiscoveryRetryInterval","unixSocketDiscoveryMaxTime","handleCtrlC","setUserAbortDiscovery","discoverRDPUnixSocket","selectedRDPSocketFile","removeListener","chooseLocalTcpPort","tcpPort","setupForward","selectedTCPPort","srv","createServer","listen","freeTcpPort","address","extensionIdFile","content","lines","getIdFromSourceDir","writeFile","saveIdToSourceDir","apiKey","apiProxy","apiSecret","apiUrlPrefix","timeout","preValidatedManifest","signAddon","buildResult","idFromSourceDir","manifestId","xpiPath","downloadDir","signingResult","success","openUrl","updateNotifier","updateCheckInterval","getHomeDir","magicConfigName","possibleConfigs","resolvedFileName","configs","existingConfigs","newArgv","option","decamelizedOptName","expectedType","optionType","defaultValue","wasValueSetOnCLI","resolvedFilePath","fileIsReadable","constants","R_OK","isFile","fileExists"],"mappings":"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MAAoC,CAAC,CADzC,EAC4C;AAC1CL,qBAAa,KAAb;AACD;AACF,KALD,MAKO,IAAIN,MAAMU,IAAN,KAAeL,UAAf,IAA6BL,MAAMW,KAAN,KAAgBN,UAAjD,EAA6D;AAClEC,mBAAa,KAAb;AACD;;AAED,QAAIA,UAAJ,EAAgB;AACd,YAAMN,KAAN;AACD;;AAED,WAAOI,aAAaJ,KAAb,CAAP;AACD,GAjBD;AAkBD;;AAEM,SAASV,eAAT,CACLe,UADK,EAELL,KAFK,EAGI;AACT,MAAIO,MAAMC,OAAN,CAAcH,UAAd,KAA6BA,WAAWI,OAAX,CAAmBT,MAAMU,IAAzB,MAAmC,CAAC,CAArE,EAAwE;AACtE,WAAO,IAAP;AACD,GAFD,MAEO,IAAIV,MAAMU,IAAN,KAAeL,UAAnB,EAA+B;AACpC,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,C;;;;;;AC9ID;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;ACLzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC5DA;AACA;AACA;AACA;AACA;;;;;;;;ACJA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,E;;;;;;ACRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;;ACfA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;AC1BD;AACA;AACA;;;;;;;ACFA;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;ACHD,iC;;;;;;ACAA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACPA,uBAAuB;AACvB;AACA;AACA;;;;;;;ACHA,+B;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACLA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;AChBD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;ACJA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;;ACtBA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAwD,+BAA+B;AACvF;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC,G;;;;;;AClDD;;;;;;;ACAA;AACA;AACA;AACA;;;;;;;ACHA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;;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/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACrEA;AACA,qEAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACPA;AACA;;AAEA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA,iCAAiC,SAAS,EAAE;AAC5C,CAAC,YAAY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0EAA4E,kBAAkB,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gCAAgC;AACvF;AACA;AACA,KAAK;AACL;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACpCD;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACPA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACjCA,8BAA8B;;;;;;;ACA9B;AACA,UAAU;AACV;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;AChRD;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA,GAAG,4CAA4C,gCAAgC;AAC/E;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC,GAAG;AACH;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;ACnBH;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;ACXH,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;;AAEA,0CAA0C,mCAAsC;;;;;;;;ACHhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,EAAE;AAChD,mBAAmB,sCAAsC;AACzD,CAAC,qCAAqC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACjCD,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,qEAAuE,4CAA4C;;;;;;;ACFnH,yC;;;;;;ACAA,kC;;;;;;ACAA,sC;;;;;;ACAA,qC;;;;;;ACAA,mC;;;;;;;;;;;;;;ACCA;;;;AACA;;;;;;AAEO,IAAMa,0BAAS,6CAAf,C;;;;;;ACJP,oC;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;AChBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACdA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA;;;;;;;ACAA;;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,E;;;;;;AChCA,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;AACA,8BAA8B,+CAA8C;;;;;;;ACF5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;;;;;;;ACxBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,8BAA8B,kCAAsC;;;;;;;ACFpE,sC;;;;;;ACAA,mC;;;;;;ACAA,sC;;;;;;;;;;;;kBC6DwBxK,I;;AA5DxB;;AAEA;;AACA;;AAGA;AAGA,IAAM5M,MAAM,0BAAaC,UAAb,CAAZ;;AAGA;;AA2BA;;AAqBe,SAAS2M,IAAT,OAkBE;AAAA,MAhBbxI,YAgBa,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","file":"web-ext.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 87);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9f440c76676cd5bd8764","/* @flow */\nimport bunyan, {nameFromLevel, createLogger as defaultLogCreator}\n  from 'bunyan';\n\n\n// Bunyan-related Flow types\n\nexport type TRACE = 10;\nexport type DEBUG = 20;\nexport type INFO = 30;\nexport type WARN = 40;\nexport type ERROR = 50;\nexport type FATAL = 60;\n\nexport type BunyanLogLevel =\n  TRACE | DEBUG | INFO | WARN | ERROR | FATAL;\n\nexport type BunyanLogEntry = {|\n  name: string,\n  msg: string,\n  level: BunyanLogLevel,\n|};\n\nexport type Logger = {\n  debug: (msg: string, ...args: any) => void,\n  error: (msg: string, ...args: any) => void,\n  info: (msg: string, ...args: any) => void,\n  warn: (msg: string, ...args: any) => void,\n};\n\n\n// ConsoleStream types and implementation.\n\nexport type ConsoleStreamParams = {|\n  verbose?: boolean,\n|};\n\nexport type ConsoleOptions = {|\n  localProcess?: typeof process,\n|};\n\nexport class ConsoleStream {\n  verbose: boolean;\n  isCapturing: boolean;\n  capturedMessages: Array<string>;\n\n  constructor({verbose = false}: ConsoleStreamParams = {}) {\n    this.verbose = verbose;\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  format({name, msg, level}: BunyanLogEntry): string {\n    const prefix = this.verbose ? `[${name}][${nameFromLevel[level]}] ` : '';\n    return `${prefix}${msg}\\n`;\n  }\n\n  makeVerbose() {\n    this.verbose = true;\n  }\n\n  write(\n    packet: BunyanLogEntry,\n    {localProcess = process}: ConsoleOptions = {}\n  ): void {\n    const thisLevel: BunyanLogLevel = this.verbose ? bunyan.TRACE : bunyan.INFO;\n    if (packet.level >= thisLevel) {\n      const msg = this.format(packet);\n      if (this.isCapturing) {\n        this.capturedMessages.push(msg);\n      } else {\n        localProcess.stdout.write(msg);\n      }\n    }\n  }\n\n  startCapturing() {\n    this.isCapturing = true;\n  }\n\n  stopCapturing() {\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  flushCapturedLogs({localProcess = process}: ConsoleOptions = {}) {\n    for (const msg of this.capturedMessages) {\n      localProcess.stdout.write(msg);\n    }\n    this.capturedMessages = [];\n  }\n}\n\nexport const consoleStream = new ConsoleStream();\n\n\n// createLogger types and implementation.\n\nexport type BunyanStreamConfig = {|\n  type: string,\n  stream: ConsoleStream,\n|};\n\nexport type CreateBunyanLogParams = {|\n  name: string,\n  level: BunyanLogLevel,\n  streams: Array<BunyanStreamConfig>,\n|};\n\nexport type CreateBunyanLogFn = (params: CreateBunyanLogParams) => Logger;\n\nexport type CreateLoggerOptions = {|\n  createBunyanLog: CreateBunyanLogFn,\n|};\n\nexport function createLogger(\n  filename: string,\n  {createBunyanLog = defaultLogCreator}: CreateLoggerOptions = {}\n): Logger {\n  return createBunyanLog({\n    // Strip the leading src/ from file names (which is in all file names) to\n    // make the name less redundant.\n    name: filename.replace(/^src\\//, ''),\n    // Capture all log levels and let the stream filter them.\n    level: bunyan.TRACE,\n    streams: [{\n      type: 'raw',\n      stream: consoleStream,\n    }],\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/logger.js","var core = module.exports = { version: '2.5.3' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 2\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 3\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/asyncToGenerator.js\n// module id = 4\n// module chunks = 0","/* @flow */\nimport ExtendableError from 'es6-error';\n\n\n/*\n * Base error for all custom web-ext errors.\n */\nexport class WebExtError extends ExtendableError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The class for errors that can be fixed by the developer.\n */\nexport class UsageError extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The manifest for the extension is invalid (or missing).\n */\nexport class InvalidManifest extends UsageError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The remote Firefox does not support temporary add-on installation.\n */\nexport class RemoteTempInstallNotSupported extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/*\n * The errors collected when reloading all extensions at once\n * (initialized from a map of errors by extensionSourceDir string).\n */\nexport class MultiExtensionsReloadError extends WebExtError {\n  constructor(errorsMap: Map<string, Error>) {\n    let errors = '';\n    for (const [sourceDir, error] of errorsMap) {\n      const msg = String(error);\n      errors += `\\nError on extension loaded from ${sourceDir}: ${msg}\\n`;\n    }\n    const message = `Reload errors: ${errors}`;\n\n    super(message);\n    this.errorsBySourceDir = errorsMap;\n  }\n}\n\n/*\n * Sugar-y way to catch only instances of a certain error.\n *\n * Usage:\n *\n *  Promise.reject(SyntaxError)\n *    .catch(onlyInstancesOf(SyntaxError, (error) => {\n *      // error is guaranteed to be an instance of SyntaxError\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyInstancesOf(\n  predicate: Function, errorHandler: Function\n): Function {\n  return (error) => {\n    if (error instanceof predicate) {\n      return errorHandler(error);\n    } else {\n      throw error;\n    }\n  };\n}\n\n\n/*\n * Sugar-y way to catch only errors having certain code(s).\n *\n * Usage:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode('ENOENT', (error) => {\n *      // error.code is guaranteed to be ENOENT\n *    }))\n *\n *  or:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], (error) => {\n *      // ...\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyErrorsWithCode(\n  codeWanted: (string | number) | Array<string | number>,\n  errorHandler: Function\n): Function {\n  return (error) => {\n    let throwError = true;\n\n    if (Array.isArray(codeWanted)) {\n      if (codeWanted.indexOf(error.code) !== -1 ||\n          codeWanted.indexOf(error.errno) !== -1) {\n        throwError = false;\n      }\n    } else if (error.code === codeWanted || error.errno === codeWanted) {\n      throwError = false;\n    }\n\n    if (throwError) {\n      throw error;\n    }\n\n    return errorHandler(error);\n  };\n}\n\nexport function isErrorWithCode(\n  codeWanted: string | Array<string>,\n  error: Object,\n): boolean {\n  if (Array.isArray(codeWanted) && codeWanted.indexOf(error.code) !== -1) {\n    return true;\n  } else if (error.code === codeWanted) {\n    return true;\n  }\n\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 6\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && key in exports) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 7\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 8\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 9\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 10\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 11\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 12\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 13\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 14\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 15\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 16\n// module chunks = 0","module.exports = require(\"mz\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mz\"\n// module id = 17\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 18\n// module chunks = 0","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 19\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 20\n// module chunks = 0","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 21\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 22\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 23\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 24\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = 25\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/slicedToArray.js\n// module id = 26\n// module chunks = 0","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 27\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 28\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 29\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 30\n// module chunks = 0","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 31\n// module chunks = 0","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 32\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 33\n// module chunks = 0","module.exports = require(\"es6-promisify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promisify\"\n// module id = 34\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\n\nimport {InvalidManifest} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n\n// getValidatedManifest helper types and implementation\n\nexport type ExtensionManifestApplications = {|\n  gecko: {|\n    id?: string,\n    strict_min_version?: string,\n    strict_max_version?: string,\n    update_url?: string,\n  |},\n|};\n\nexport type ExtensionManifest = {|\n  name: string,\n  version: string,\n  default_locale?: string,\n  applications?: ExtensionManifestApplications,\n|};\n\nexport default async function getValidatedManifest(\n  sourceDir: string\n): Promise<ExtensionManifest> {\n  const manifestFile = path.join(sourceDir, 'manifest.json');\n  log.debug(`Validating manifest at ${manifestFile}`);\n\n  let manifestContents;\n\n  try {\n    manifestContents = await fs.readFile(manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Could not read manifest.json file at ${manifestFile}: ${error}`);\n  }\n\n  let manifestData;\n\n  try {\n    manifestData = parseJSON(manifestContents, manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Error parsing manifest.json at ${manifestFile}: ${error}`);\n  }\n\n  const errors = [];\n  // This is just some basic validation of what web-ext needs, not\n  // what Firefox will need to run the extension.\n  // TODO: integrate with the addons-linter for actual validation.\n  if (!manifestData.name) {\n    errors.push('missing \"name\" property');\n  }\n  if (!manifestData.version) {\n    errors.push('missing \"version\" property');\n  }\n\n  if (manifestData.applications && !manifestData.applications.gecko) {\n    // Since the applications property only applies to gecko, make\n    // sure 'gecko' exists when 'applications' is defined. This should\n    // make introspection of gecko properties easier.\n    errors.push('missing \"applications.gecko\" property');\n  }\n\n  if (errors.length) {\n    throw new InvalidManifest(\n      `Manifest at ${manifestFile} is invalid: ${errors.join('; ')}`);\n  }\n\n  return manifestData;\n}\n\n\nexport function getManifestId(manifestData: ExtensionManifest): string | void {\n  return manifestData.applications ?\n    manifestData.applications.gecko.id : undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/manifest.js","/* @flow */\nimport defaultFirefoxConnector from 'node-firefox-connect';\n// RemoteFirefox types and implementation\nimport type FirefoxClient from 'firefox-client'; //eslint-disable-line import/no-extraneous-dependencies\n\nimport {createLogger} from '../util/logger';\nimport {\n  isErrorWithCode,\n  RemoteTempInstallNotSupported,\n  UsageError,\n  WebExtError,\n} from '../errors';\n\nconst log = createLogger(__filename);\n\n// The default port that Firefox's remote debugger will listen on and the\n// client will connect to.\nexport const REMOTE_PORT = 6005;\n\nexport type FirefoxConnectorFn =\n  (port?: number) => Promise<FirefoxClient>;\n\nexport type FirefoxRDPAddonActor = {|\n  id: string,\n  actor: string,\n|};\n\nexport type FirefoxRDPResponseError = {|\n  error: {\n    message: string,\n  },\n|};\n\nexport type FirefoxRDPResponseAddon = {|\n  addon: FirefoxRDPAddonActor,\n|};\n\nexport type FirefoxRDPResponseRequestTypes = {|\n  requestTypes: Array<string>,\n|};\n\n// NOTE: this type aliases Object to catch any other possible response.\nexport type FirefoxRDPResponseAny = Object;\n\nexport type FirefoxRDPResponseMaybe =\n  FirefoxRDPResponseRequestTypes | FirefoxRDPResponseAny;\n\nexport class RemoteFirefox {\n  client: Object;\n  checkedForAddonReloading: boolean;\n\n  constructor(client: FirefoxClient) {\n    this.client = client;\n    this.checkedForAddonReloading = false;\n\n    client.client.on('disconnect', () => {\n      log.debug('Received \"disconnect\" from Firefox client');\n    });\n    client.client.on('end', () => {\n      log.debug('Received \"end\" from Firefox client');\n    });\n    client.client.on('message', (info) => {\n      // These are arbitrary messages that the client library ignores.\n      log.debug(`Received message from client: ${JSON.stringify(info)}`);\n    });\n  }\n\n  disconnect() {\n    this.client.disconnect();\n  }\n\n  addonRequest(\n    addon: FirefoxRDPAddonActor,\n    request: string\n  ): Promise<FirefoxRDPResponseMaybe> {\n    return new Promise((resolve, reject) => {\n      this.client.client.makeRequest(\n        {to: addon.actor, type: request}, (response) => {\n          if (response.error) {\n            const error = `${response.error}: ${response.message}`;\n            log.debug(\n              `Client responded to '${request}' request with error:`, error);\n            reject(new WebExtError(error));\n          } else {\n            resolve(response);\n          }\n        });\n    });\n  }\n\n  installTemporaryAddon(\n    addonPath: string\n  ): Promise<FirefoxRDPResponseAddon> {\n    return new Promise((resolve, reject) => {\n      this.client.request('listTabs', (error, tabsResponse) => {\n        if (error) {\n          return reject(new WebExtError(\n            `Remote Firefox: listTabs() error: ${error}`));\n        }\n        if (!tabsResponse.addonsActor) {\n          log.debug(\n            'listTabs returned a falsey addonsActor: ' +\n            `${tabsResponse.addonsActor}`);\n          return reject(new RemoteTempInstallNotSupported(\n            'This is an older version of Firefox that does not provide an ' +\n            'add-ons actor for remote installation. Try Firefox 49 or ' +\n            'higher.'));\n        }\n\n        this.client.client.makeRequest({\n          to: tabsResponse.addonsActor,\n          type: 'installTemporaryAddon',\n          addonPath,\n        }, (installResponse) => {\n          if (installResponse.error) {\n            return reject(new WebExtError(\n              'installTemporaryAddon: Error: ' +\n              `${installResponse.error}: ${installResponse.message}`));\n          }\n          log.debug(\n            `installTemporaryAddon: ${JSON.stringify(installResponse)}`);\n          log.info(`Installed ${addonPath} as a temporary add-on`);\n          resolve(installResponse);\n        });\n      });\n    });\n  }\n\n  getInstalledAddon(addonId: string): Promise<FirefoxRDPAddonActor> {\n    return new Promise(\n      (resolve, reject) => {\n        this.client.request('listAddons', (error, response) => {\n          if (error) {\n            reject(new WebExtError(\n              `Remote Firefox: listAddons() error: ${error}`));\n          } else {\n            resolve(response.addons);\n          }\n        });\n      })\n      .then((addons) => {\n        for (const addon of addons) {\n          if (addon.id === addonId) {\n            return addon;\n          }\n        }\n        log.debug(\n          `Remote Firefox has these addons: ${addons.map((a) => a.id)}`);\n        throw new WebExtError(\n          'The remote Firefox does not have your extension installed');\n      });\n  }\n\n  async checkForAddonReloading(\n    addon: FirefoxRDPAddonActor\n  ): Promise<FirefoxRDPAddonActor> {\n    if (this.checkedForAddonReloading) {\n      // We only need to check once if reload() is supported.\n      return addon;\n    } else {\n      const response = await this.addonRequest(addon, 'requestTypes');\n\n      if (response.requestTypes.indexOf('reload') === -1) {\n        const supportedRequestTypes = JSON.stringify(response.requestTypes);\n        log.debug(\n          `Remote Firefox only supports: ${supportedRequestTypes}`);\n        throw new UsageError(\n          'This Firefox version does not support add-on reloading. ' +\n          'Re-run with --no-reload');\n      } else {\n        this.checkedForAddonReloading = true;\n        return addon;\n      }\n    }\n  }\n\n  async reloadAddon(addonId: string): Promise<void> {\n    const addon = await this.getInstalledAddon(addonId);\n    await this.checkForAddonReloading(addon);\n    await this.addonRequest(addon, 'reload');\n    process.stdout.write(\n      `\\rLast extension reload: ${(new Date()).toTimeString()}`);\n    log.debug('\\n');\n  }\n}\n\n\n// Connect types and implementation\n\nexport type ConnectOptions = {|\n  connectToFirefox: FirefoxConnectorFn,\n|};\n\nexport async function connect(\n  port: number = REMOTE_PORT,\n  {connectToFirefox = defaultFirefoxConnector}: ConnectOptions = {}\n): Promise<RemoteFirefox> {\n  log.debug(`Connecting to Firefox on port ${port}`);\n  const client = await connectToFirefox(port);\n  log.debug(`Connected to the remote Firefox debugger on port ${port}`);\n  return new RemoteFirefox(client);\n}\n\n\n// ConnectWithMaxRetries types and implementation\n\nexport type ConnectWithMaxRetriesParams = {|\n  maxRetries?: number,\n  retryInterval?: number,\n  port: number,\n|};\n\nexport type ConnectWithMaxRetriesDeps = {|\n  connectToFirefox: typeof connect,\n|};\n\nexport async function connectWithMaxRetries(\n  // A max of 250 will try connecting for 30 seconds.\n  {maxRetries = 250, retryInterval = 120, port}: ConnectWithMaxRetriesParams,\n  {connectToFirefox = connect}: ConnectWithMaxRetriesDeps = {}\n): Promise<RemoteFirefox> {\n  async function establishConnection() {\n    var lastError;\n\n    for (let retries = 0; retries <= maxRetries; retries++) {\n      try {\n        return await connectToFirefox(port);\n      } catch (error) {\n        if (isErrorWithCode('ECONNREFUSED', error)) {\n          // Wait for `retryInterval` ms.\n          await new Promise((resolve) => {\n            setTimeout(resolve, retryInterval);\n          });\n\n          lastError = error;\n          log.debug(\n            `Retrying Firefox (${retries}); connection error: ${error}`);\n        } else {\n          log.error(error.stack);\n          throw error;\n        }\n      }\n    }\n\n    log.debug('Connect to Firefox debugger: too many retries');\n    throw lastError;\n  }\n\n  log.debug('Connecting to the remote Firefox debugger');\n  return establishConnection();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/remote.js","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 37\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 38\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 39\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 40\n// module chunks = 0","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 41\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 42\n// module chunks = 0","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 43\n// module chunks = 0","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 44\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 45\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 46\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 47\n// module chunks = 0","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 48\n// module chunks = 0","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_new-promise-capability.js\n// module id = 49\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 50\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 51\n// module chunks = 0","/* @flow */\nimport path from 'path';\nimport {createWriteStream} from 'fs';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\nimport defaultEventToPromise from 'event-to-promise';\n\nimport defaultSourceWatcher from '../watcher';\nimport {zipDir} from '../util/zip-dir';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n  FileFilter,\n} from '../util/file-filter';\n// Import flow types.\nimport type {OnSourceChangeFn} from '../watcher';\nimport type {ExtensionManifest} from '../util/manifest';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\nexport function safeFileName(name: string): string {\n  return name.toLowerCase().replace(/[^a-z0-9.-]+/g, '_');\n}\n\n\n// defaultPackageCreator types and implementation.\n\nexport type ExtensionBuildResult = {|\n  extensionPath: string,\n|};\n\nexport type PackageCreatorParams = {|\n  manifestData?: ExtensionManifest,\n  sourceDir: string,\n  fileFilter: FileFilter,\n  artifactsDir: string,\n  overwriteDest: boolean,\n  showReadyMessage: boolean\n|};\n\nexport type LocalizedNameParams = {|\n  messageFile: string,\n  manifestData: ExtensionManifest,\n|}\n\nexport type PackageCreatorOptions = {|\n  eventToPromise: typeof defaultEventToPromise,\n|};\n\n// This defines the _locales/messages.json type. See:\n// https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization#Providing_localized_strings_in__locales\ntype LocalizedMessageData = {|\n  [messageName: string]: {|\n    description: string,\n    message: string,\n  |},\n|}\n\nexport async function getDefaultLocalizedName(\n  {messageFile, manifestData}: LocalizedNameParams\n): Promise<string> {\n\n  let messageData: LocalizedMessageData;\n  let messageContents: string | Buffer;\n  let extensionName: string = manifestData.name;\n\n  try {\n    messageContents = await fs.readFile(messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error reading messages.json file at ${messageFile}: ${error}`);\n  }\n\n  try {\n    messageData = parseJSON(messageContents, messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error parsing messages.json ${error}`);\n  }\n\n  extensionName = manifestData.name.replace(\n    /__MSG_([A-Za-z0-9@_]+?)__/g,\n    (match, messageName) => {\n      if (!(messageData[messageName]\n            && messageData[messageName].message)) {\n        const error = new UsageError(\n          `The locale file ${messageFile} ` +\n            `is missing key: ${messageName}`);\n        throw error;\n      } else {\n        return messageData[messageName].message;\n      }\n    });\n  return Promise.resolve(extensionName);\n}\n\nexport type PackageCreatorFn =\n    (params: PackageCreatorParams) => Promise<ExtensionBuildResult>;\n\nexport async function defaultPackageCreator(\n  {\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  }: PackageCreatorParams,\n  {\n    eventToPromise = defaultEventToPromise,\n  }: PackageCreatorOptions = {}\n): Promise<ExtensionBuildResult> {\n  let id;\n  if (manifestData) {\n    id = getManifestId(manifestData);\n    log.debug(`Using manifest id=${id || '[not specified]'}`);\n  } else {\n    manifestData = await getValidatedManifest(sourceDir);\n  }\n\n  const buffer = await zipDir(sourceDir, {\n    filter: (...args) => fileFilter.wantFile(...args),\n  });\n\n  let extensionName: string = manifestData.name;\n\n  if (manifestData.default_locale) {\n    const messageFile = path.join(\n      sourceDir, '_locales',\n      manifestData.default_locale, 'messages.json'\n    );\n    log.debug('Manifest declared default_locale, localizing extension name');\n    extensionName = await getDefaultLocalizedName({\n      messageFile, manifestData,\n    });\n  }\n  const packageName = safeFileName(\n    `${extensionName}-${manifestData.version}.zip`);\n  const extensionPath = path.join(artifactsDir, packageName);\n\n  // Added 'wx' flags to avoid overwriting of existing package.\n  let stream = createWriteStream(extensionPath, {flags: 'wx'});\n\n  stream.write(buffer, () => stream.end());\n\n  try {\n    await eventToPromise(stream, 'close');\n  } catch (error) {\n    if (!isErrorWithCode('EEXIST', error)) {\n      throw error;\n    }\n    if (!overwriteDest) {\n      throw new UsageError(\n        `Extension exists at the destination path: ${extensionPath}\\n` +\n        'Use --overwrite-dest to enable overwriting.');\n    }\n    log.info(`Destination exists, overwriting: ${extensionPath}`);\n    stream = createWriteStream(extensionPath);\n    stream.write(buffer, () => stream.end());\n    await eventToPromise(stream, 'close');\n  }\n\n  if (showReadyMessage) {\n    log.info(`Your web extension is ready: ${extensionPath}`);\n  }\n  return {extensionPath};\n}\n\n\n// Build command types and implementation.\n\nexport type BuildCmdParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  asNeeded?: boolean,\n  overwriteDest?: boolean,\n  ignoreFiles?: Array<string>,\n|};\n\nexport type BuildCmdOptions = {|\n  manifestData?: ExtensionManifest,\n  fileFilter?: FileFilter,\n  onSourceChange?: OnSourceChangeFn,\n  packageCreator?: PackageCreatorFn,\n  showReadyMessage?: boolean,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default async function build(\n  {\n    sourceDir,\n    artifactsDir,\n    asNeeded = false,\n    overwriteDest = false,\n    ignoreFiles = [],\n  }: BuildCmdParams,\n  {\n    manifestData,\n    createFileFilter = defaultFileFilterCreator,\n    fileFilter = createFileFilter({\n      sourceDir,\n      artifactsDir,\n      ignoreFiles,\n    }),\n    onSourceChange = defaultSourceWatcher,\n    packageCreator = defaultPackageCreator,\n    showReadyMessage = true,\n  }: BuildCmdOptions = {}\n): Promise<ExtensionBuildResult> {\n\n  const rebuildAsNeeded = asNeeded; // alias for `build --as-needed`\n  log.info(`Building web extension from ${sourceDir}`);\n\n  const createPackage = () => packageCreator({\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  });\n\n  await prepareArtifactsDir(artifactsDir);\n  const result = await createPackage();\n\n  if (rebuildAsNeeded) {\n    log.info('Rebuilding when files change...');\n    onSourceChange({\n      sourceDir,\n      artifactsDir,\n      onChange: () => {\n        return createPackage().catch((error) => {\n          log.error(error.stack);\n          throw error;\n        });\n      },\n      shouldWatchFile: (...args) => fileFilter.wantFile(...args),\n    });\n  }\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/build.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/typeof.js\n// module id = 53\n// module chunks = 0","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 54\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 55\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport minimatch from 'minimatch';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n// check if target is a sub directory of src\nexport const isSubPath = (src: string, target: string): boolean => {\n  const relate = path.relative(src, target);\n  // same dir\n  if (!relate) {\n    return false;\n  }\n  if (relate === '..') {\n    return false;\n  }\n  return !relate.startsWith(`..${path.sep}`);\n};\n\n// FileFilter types and implementation.\n\nexport type FileFilterOptions = {|\n  baseIgnoredPatterns?: Array<string>,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  artifactsDir?: string,\n|};\n\n/*\n * Allows or ignores files.\n */\nexport class FileFilter {\n  filesToIgnore: Array<string>;\n  sourceDir: string;\n\n  constructor({\n    baseIgnoredPatterns = [\n      '**/*.xpi',\n      '**/*.zip',\n      '**/.*', // any hidden file and folder\n      '**/.*/**/*', // and the content inside hidden folder\n      '**/node_modules',\n      '**/node_modules/**/*',\n    ],\n    ignoreFiles = [],\n    sourceDir,\n    artifactsDir,\n  }: FileFilterOptions = {}) {\n    sourceDir = path.resolve(sourceDir);\n\n    this.filesToIgnore = [];\n    this.sourceDir = sourceDir;\n\n    this.addToIgnoreList(baseIgnoredPatterns);\n    if (ignoreFiles) {\n      this.addToIgnoreList(ignoreFiles);\n    }\n    if (artifactsDir && isSubPath(sourceDir, artifactsDir)) {\n      artifactsDir = path.resolve(artifactsDir);\n      log.debug(\n        `Ignoring artifacts directory \"${artifactsDir}\" ` +\n        'and all its subdirectories'\n      );\n      this.addToIgnoreList([\n        artifactsDir,\n        path.join(artifactsDir, '**', '*'),\n      ]);\n    }\n  }\n\n  /**\n   *  Resolve relative path to absolute path with sourceDir.\n   */\n  resolveWithSourceDir(file: string): string {\n    const resolvedPath = path.resolve(this.sourceDir, file);\n    log.debug(\n      `Resolved path ${file} with sourceDir ${this.sourceDir} ` +\n      `to ${resolvedPath}`\n    );\n    return resolvedPath;\n  }\n\n  /**\n   *  Insert more files into filesToIgnore array.\n   */\n  addToIgnoreList(files: Array<string>) {\n    for (const file of files) {\n      this.filesToIgnore.push(this.resolveWithSourceDir(file));\n    }\n  }\n\n  /*\n   * Returns true if the file is wanted.\n   *\n   * If filePath does not start with a slash, it will be treated as a path\n   * relative to sourceDir when matching it against all configured\n   * ignore-patterns.\n   *\n   * Example: this is called by zipdir as wantFile(filePath) for each\n   * file in the folder that is being archived.\n   */\n  wantFile(filePath: string): boolean {\n    const resolvedPath = this.resolveWithSourceDir(filePath);\n    for (const test of this.filesToIgnore) {\n      if (minimatch(resolvedPath, test)) {\n        log.debug(\n          `FileFilter: ignoring file ${resolvedPath} (it matched ${test})`);\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\n// a helper function to make mocking easier\n\nexport const createFileFilter = (\n  (params: FileFilterOptions): FileFilter => new FileFilter(params)\n);\n\nexport type FileFilterCreatorFn = typeof createFileFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-filter.js","/* @flow */\nimport defaultNotifier from 'node-notifier';\n\nimport {createLogger} from './logger';\nimport type {Logger} from './logger';\n\nconst defaultLog = createLogger(__filename);\n\nexport type DesktopNotificationsParams = {|\n  title: string,\n  message: string,\n  icon?: string,\n|};\n\nexport type DesktopNotificationsOptions = {|\n  notifier?: typeof defaultNotifier,\n  log?: Logger,\n|};\n\nexport function showDesktopNotification(\n  {\n    title, message, icon,\n  }: DesktopNotificationsParams,\n  {\n    notifier = defaultNotifier,\n    log = defaultLog,\n  }: DesktopNotificationsOptions = {}\n): Promise<void> {\n\n  return new Promise((resolve, reject) => {\n    notifier.notify({title, message, icon}, (err, res) => {\n      if (err) {\n        log.debug(`Desktop notifier error: ${err.message},` +\n                 ` response: ${res}`);\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/desktop-notifier.js","/* @flow */\nimport nodeFs from 'fs';\nimport path from 'path';\n\nimport {default as defaultFxRunner} from 'fx-runner';\nimport FirefoxProfile, {copyFromUserProfile as defaultUserProfileCopier}\n  from 'firefox-profile';\nimport {fs} from 'mz';\nimport promisify from 'es6-promisify';\nimport eventToPromise from 'event-to-promise';\n\nimport isDirectory from '../util/is-directory';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {getPrefs as defaultPrefGetter} from './preferences';\nimport {getManifestId} from '../util/manifest';\nimport {createLogger} from '../util/logger';\nimport {connect as defaultFirefoxConnector, REMOTE_PORT} from './remote';\n// Import flow types\nimport type {FirefoxConnectorFn} from './remote';\nimport type {\n  PreferencesAppName,\n  PreferencesGetterFn,\n  FirefoxPreferences,\n} from './preferences';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const defaultFirefoxEnv = {\n  XPCOM_DEBUG_BREAK: 'stack',\n  NS_TRACE_MALLOC_DISABLE_STACKS: '1',\n};\n\n// defaultRemotePortFinder types and implementation.\n\nexport type RemotePortFinderParams = {|\n  portToTry?: number,\n  retriesLeft?: number,\n  connectToFirefox?: FirefoxConnectorFn,\n|};\n\nexport type RemotePortFinderFn =\n  (params?: RemotePortFinderParams) => Promise<number>;\n\nexport async function defaultRemotePortFinder(\n  {\n    portToTry = REMOTE_PORT,\n    retriesLeft = 10,\n    connectToFirefox = defaultFirefoxConnector,\n  }: RemotePortFinderParams = {}\n): Promise<number> {\n  log.debug(`Checking if remote Firefox port ${portToTry} is available`);\n\n  let client;\n\n  while (retriesLeft >= 0) {\n    try {\n      client = await connectToFirefox(portToTry);\n      log.debug(`Remote Firefox port ${portToTry} is in use ` +\n                `(retries remaining: ${retriesLeft})`);\n    } catch (error) {\n      if (isErrorWithCode('ECONNREFUSED', error)) {\n        // The connection was refused so this port is good to use.\n        return portToTry;\n      }\n\n      throw error;\n    }\n\n    client.disconnect();\n    portToTry++;\n    retriesLeft--;\n  }\n\n  throw new WebExtError('Too many retries on port search');\n}\n\n\n// Declare the needed 'fx-runner' module flow types.\n\nexport type FirefoxRunnerParams = {|\n  binary: ?string,\n  profile?: string,\n  'new-instance'?: boolean,\n  'no-remote'?: boolean,\n  'foreground'?: boolean,\n  'listen': number,\n  'binary-args'?: Array<string> | string,\n  'env'?: {\n    [key: string]: string\n  },\n  'verbose'?: boolean,\n|};\n\nexport interface FirefoxProcess extends events$EventEmitter {\n  stderr: events$EventEmitter;\n  stdout: events$EventEmitter;\n  kill: Function;\n}\n\nexport type FirefoxRunnerResults = {|\n  process: FirefoxProcess,\n  binary: string,\n  args: Array<string>,\n|}\n\nexport type FirefoxRunnerFn =\n  (params: FirefoxRunnerParams) => Promise<FirefoxRunnerResults>;\n\n\nexport type FirefoxInfo = {|\n  firefox: FirefoxProcess,\n  debuggerPort: number,\n|}\n\n// Run command types and implementaion.\n\nexport type FirefoxRunOptions = {|\n  fxRunner?: FirefoxRunnerFn,\n  findRemotePort?: RemotePortFinderFn,\n  firefoxBinary?: string,\n  binaryArgs?: Array<string>,\n  args?: Array<any>,\n|};\n\n/*\n * Runs Firefox with the given profile object and resolves a promise on exit.\n */\nexport async function run(\n  profile: FirefoxProfile,\n  {\n    fxRunner = defaultFxRunner,\n    findRemotePort = defaultRemotePortFinder,\n    firefoxBinary, binaryArgs,\n  }: FirefoxRunOptions = {}\n): Promise<FirefoxInfo> {\n\n  log.debug(`Running Firefox with profile at ${profile.path()}`);\n\n  const remotePort = await findRemotePort();\n\n  const results = await fxRunner({\n    // if this is falsey, fxRunner tries to find the default one.\n    'binary': firefoxBinary,\n    'binary-args': binaryArgs,\n    // This ensures a new instance of Firefox is created. It has nothing\n    // to do with the devtools remote debugger.\n    'no-remote': true,\n    'listen': remotePort,\n    'foreground': true,\n    'profile': profile.path(),\n    'env': {\n      ...process.env,\n      ...defaultFirefoxEnv,\n    },\n    'verbose': true,\n  });\n\n  const firefox = results.process;\n\n  log.debug(`Executing Firefox binary: ${results.binary}`);\n  log.debug(`Firefox args: ${results.args.join(' ')}`);\n\n  firefox.on('error', (error) => {\n    // TODO: show a nice error when it can't find Firefox.\n    // if (/No such file/.test(err) || err.code === 'ENOENT') {\n    log.error(`Firefox error: ${error}`);\n    throw error;\n  });\n\n  log.info(\n    'Use --verbose or open Tools > Web Developer > Browser Console ' +\n    'to see logging');\n\n  firefox.stderr.on('data', (data) => {\n    log.debug(`Firefox stderr: ${data.toString().trim()}`);\n  });\n\n  firefox.stdout.on('data', (data) => {\n    log.debug(`Firefox stdout: ${data.toString().trim()}`);\n  });\n\n  firefox.on('close', () => {\n    log.debug('Firefox closed');\n  });\n\n  return { firefox, debuggerPort: remotePort };\n}\n\n\n// isDefaultProfile types and implementation.\n\nconst DEFAULT_PROFILES_NAMES = [\n  'default',\n  'dev-edition-default',\n];\n\nexport type IsDefaultProfileFn = (\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat,\n) => Promise<boolean>;\n\n/*\n * Tests if a profile is a default Firefox profile (both as a profile name or\n * profile path).\n *\n * Returns a promise that resolves to true if the profile is one of default Firefox profile.\n */\nexport async function isDefaultProfile(\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder = FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat = fs.stat,\n): Promise<boolean> {\n  if (DEFAULT_PROFILES_NAMES.includes(profilePathOrName)) {\n    return true;\n  }\n\n  const baseProfileDir = ProfileFinder.locateUserDirectory();\n  const profilesIniPath = path.join(baseProfileDir, 'profiles.ini');\n  try {\n    await fsStat(profilesIniPath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`profiles.ini not found: ${error}`);\n\n      // No profiles exist yet, default to false (the default profile name contains a\n      // random generated component).\n      return false;\n    }\n\n    // Re-throw any unexpected exception.\n    throw error;\n  }\n\n  // Check for profile dir path.\n  const finder = new ProfileFinder(baseProfileDir);\n  const readProfiles = promisify(finder.readProfiles, finder);\n\n  await readProfiles();\n\n  const normalizedProfileDirPath = path.normalize(\n    path.join(path.resolve(profilePathOrName), path.sep)\n  );\n\n  for (const profile of finder.profiles) {\n    // Check if the profile dir path or name is one of the default profiles\n    // defined in the profiles.ini file.\n    if (DEFAULT_PROFILES_NAMES.includes(profile.Name) ||\n        profile.Default === '1') {\n      let profileFullPath;\n\n      // Check for profile name.\n      if (profile.Name === profilePathOrName) {\n        return true;\n      }\n\n      // Check for profile path.\n      if (profile.IsRelative === '1') {\n        profileFullPath = path.join(baseProfileDir, profile.Path, path.sep);\n      } else {\n        profileFullPath = path.join(profile.Path, path.sep);\n      }\n\n      if (path.normalize(profileFullPath) === normalizedProfileDirPath) {\n        return true;\n      }\n    }\n  }\n\n  // Profile directory not found.\n  return false;\n}\n\n// configureProfile types and implementation.\n\nexport type ConfigureProfileOptions = {|\n  app?: PreferencesAppName,\n  getPrefs?: PreferencesGetterFn,\n  customPrefs?: FirefoxPreferences,\n|};\n\nexport type ConfigureProfileFn = (\n  profile: FirefoxProfile,\n  options?: ConfigureProfileOptions\n) => Promise<FirefoxProfile>;\n\n/*\n * Configures a profile with common preferences that are required to\n * activate extension development.\n *\n * Returns a promise that resolves with the original profile object.\n */\nexport function configureProfile(\n  profile: FirefoxProfile,\n  {\n    app = 'firefox',\n    getPrefs = defaultPrefGetter,\n    customPrefs = {},\n  }: ConfigureProfileOptions = {},\n): Promise<FirefoxProfile> {\n  // Set default preferences. Some of these are required for the add-on to\n  // operate, such as disabling signatures.\n  const prefs = getPrefs(app);\n  Object.keys(prefs).forEach((pref) => {\n    profile.setPreference(pref, prefs[pref]);\n  });\n  if (Object.keys(customPrefs).length > 0) {\n    const customPrefsStr = JSON.stringify(customPrefs, null, 2);\n    log.info(`Setting custom Firefox preferences: ${customPrefsStr}`);\n    Object.keys(customPrefs).forEach((custom) => {\n      profile.setPreference(custom, customPrefs[custom]);\n    });\n  }\n  profile.updatePreferences();\n  return Promise.resolve(profile);\n}\n\n// useProfile types and implementation.\n\nexport type UseProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  isFirefoxDefaultProfile?: IsDefaultProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n// Use the target path as a Firefox profile without cloning it\n\nexport async function useProfile(\n  profilePath: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    isFirefoxDefaultProfile = isDefaultProfile,\n    customPrefs = {},\n  }: UseProfileParams = {},\n): Promise<FirefoxProfile> {\n  const isForbiddenProfile = await isFirefoxDefaultProfile(profilePath);\n  if (isForbiddenProfile) {\n    throw new UsageError(\n      'Cannot use --keep-profile-changes on a default profile' +\n      ` (\"${profilePath}\")` +\n      ' because web-ext will make it insecure and unsuitable for daily use.' +\n      '\\nSee https://github.com/mozilla/web-ext/issues/1005'\n    );\n  }\n  const profile = new FirefoxProfile({destinationDirectory: profilePath});\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// createProfile types and implementation.\n\nexport type CreateProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n/*\n * Creates a new temporary profile and resolves with the profile object.\n *\n * The profile will be deleted when the system process exits.\n */\nexport async function createProfile(\n  {\n    app,\n    configureThisProfile = configureProfile,\n    customPrefs = {},\n  }: CreateProfileParams = {},\n): Promise<FirefoxProfile> {\n  const profile = new FirefoxProfile();\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// copyProfile types and implementation.\n\nexport type CopyProfileOptions = {|\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  copyFromUserProfile?: Function,\n  customPrefs?: FirefoxPreferences,\n|};\n\n/*\n * Copies an existing Firefox profile and creates a new temporary profile.\n * The new profile will be configured with some preferences required to\n * activate extension development.\n *\n * It resolves with the new profile object.\n *\n * The temporary profile will be deleted when the system process exits.\n *\n * The existing profile can be specified as a directory path or a name of\n * one that exists in the current user's Firefox directory.\n */\nexport async function copyProfile(\n  profileDirectory: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    copyFromUserProfile = defaultUserProfileCopier,\n    customPrefs = {},\n  }: CopyProfileOptions = {},\n): Promise<FirefoxProfile> {\n\n  const copy = promisify(FirefoxProfile.copy);\n  const copyByName = promisify(copyFromUserProfile);\n\n  try {\n    const dirExists = await isDirectory(profileDirectory);\n\n    let profile;\n\n    if (dirExists) {\n      log.debug(`Copying profile directory from \"${profileDirectory}\"`);\n      profile = await copy({profileDirectory});\n    } else {\n      log.debug(`Assuming ${profileDirectory} is a named profile`);\n      profile = await copyByName({name: profileDirectory});\n    }\n\n    return configureThisProfile(profile, {app, customPrefs});\n  } catch (error) {\n    throw new WebExtError(\n      `Could not copy Firefox profile from ${profileDirectory}: ${error}`);\n  }\n}\n\n\n// installExtension types and implementation.\n\nexport type InstallExtensionParams = {|\n  asProxy?: boolean,\n  manifestData: ExtensionManifest,\n  profile: FirefoxProfile,\n  extensionPath: string,\n|};\n\n/*\n * Installs an extension into the given Firefox profile object.\n * Resolves when complete.\n *\n * The extension is copied into a special location and you need to turn\n * on some preferences to allow this. See extensions.autoDisableScopes in\n * ./preferences.js.\n *\n * When asProxy is true, a special proxy file will be installed. This is a\n * text file that contains the path to the extension source.\n */\nexport async function installExtension(\n  {\n    asProxy = false,\n    manifestData,\n    profile,\n    extensionPath,\n  }: InstallExtensionParams): Promise<any> {\n  // This more or less follows\n  // https://github.com/saadtazi/firefox-profile-js/blob/master/lib/firefox_profile.js#L531\n  // (which is broken for web extensions).\n  // TODO: maybe uplift a patch that supports web extensions instead?\n\n  if (!profile.extensionsDir) {\n    throw new WebExtError('profile.extensionsDir was unexpectedly empty');\n  }\n\n  try {\n    await fs.stat(profile.extensionsDir);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`Creating extensions directory: ${profile.extensionsDir}`);\n      await fs.mkdir(profile.extensionsDir);\n    } else {\n      throw error;\n    }\n  }\n\n  const id = getManifestId(manifestData);\n  if (!id) {\n    throw new UsageError(\n      'An explicit extension ID is required when installing to ' +\n      'a profile (applications.gecko.id not found in manifest.json)');\n  }\n\n  if (asProxy) {\n    log.debug(`Installing as an extension proxy; source: ${extensionPath}`);\n\n    const isDir = await isDirectory(extensionPath);\n    if (!isDir) {\n      throw new WebExtError(\n        'proxy install: extensionPath must be the extension source ' +\n        `directory; got: ${extensionPath}`);\n    }\n\n    // Write a special extension proxy file containing the source\n    // directory. See:\n    // https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment#Firefox_extension_proxy_file\n    const destPath = path.join(profile.extensionsDir, `${id}`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n    writeStream.write(extensionPath);\n    writeStream.end();\n    return await eventToPromise(writeStream, 'close');\n  } else {\n    // Write the XPI file to the profile.\n    const readStream = nodeFs.createReadStream(extensionPath);\n    const destPath = path.join(profile.extensionsDir, `${id}.xpi`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n\n    log.debug(`Installing extension from ${extensionPath} to ${destPath}`);\n    readStream.pipe(writeStream);\n\n    return await Promise.all([\n      eventToPromise(readStream, 'close'),\n      eventToPromise(writeStream, 'close'),\n    ]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/index.js","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = (!BUGGY && $native) || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 59\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 60\n// module chunks = 0","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 61\n// module chunks = 0","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 62\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 63\n// module chunks = 0","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 64\n// module chunks = 0","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 65\n// module chunks = 0","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 66\n// module chunks = 0","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 67\n// module chunks = 0","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_species-constructor.js\n// module id = 69\n// module chunks = 0","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_task.js\n// module id = 70\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_perform.js\n// module id = 71\n// module chunks = 0","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_promise-resolve.js\n// module id = 72\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 73\n// module chunks = 0","module.exports = require(\"camelcase\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"camelcase\"\n// module id = 74\n// module chunks = 0","/* @flow */\nimport build from './build';\nimport lint from './lint';\nimport run from './run';\nimport sign from './sign';\nimport docs from './docs';\n\nexport default {build, lint, run, sign, docs};\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/index.js","module.exports = require(\"parse-json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"parse-json\"\n// module id = 76\n// module chunks = 0","module.exports = require(\"event-to-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"event-to-promise\"\n// module id = 77\n// module chunks = 0","/* @flow */\nimport Watchpack from 'watchpack';\nimport debounce from 'debounce';\n\nimport {createLogger} from './util/logger';\n\n\nconst log = createLogger(__filename);\n\n\n// onSourceChange types and implementation\n\nexport type ShouldWatchFn = (filePath: string) => boolean;\n\nexport type OnChangeFn = () => any;\n\nexport type OnSourceChangeParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\n// NOTE: this fix an issue with flow and default exports (which currently\n// lose their type signatures) by explicitly declare the default export\n// signature. Reference: https://github.com/facebook/flow/issues/449\n// eslint-disable-next-line no-shadow\ndeclare function exports(params: OnSourceChangeParams): Watchpack;\n\nexport type OnSourceChangeFn = (params: OnSourceChangeParams) => Watchpack;\n\nexport default function onSourceChange(\n  {sourceDir, artifactsDir, onChange, shouldWatchFile}: OnSourceChangeParams\n): Watchpack {\n  // TODO: For network disks, we would need to add {poll: true}.\n  const watcher = new Watchpack();\n\n  const executeImmediately = true;\n  onChange = debounce(onChange, 1000, executeImmediately);\n\n  watcher.on('change', (filePath) => {\n    proxyFileChanges({artifactsDir, onChange, filePath, shouldWatchFile});\n  });\n\n  log.debug(`Watching for file changes in ${sourceDir}`);\n  watcher.watch([], [sourceDir], Date.now());\n\n  // TODO: support interrupting the watcher on Windows.\n  // https://github.com/mozilla/web-ext/issues/225\n  process.on('SIGINT', () => watcher.close());\n  return watcher;\n}\n\n\n// proxyFileChanges types and implementation.\n\nexport type ProxyFileChangesParams = {|\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  filePath: string,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\nexport function proxyFileChanges(\n  {artifactsDir, onChange, filePath, shouldWatchFile}: ProxyFileChangesParams\n): void {\n  if (filePath.indexOf(artifactsDir) === 0 || !shouldWatchFile(filePath)) {\n    log.debug(`Ignoring change to: ${filePath}`);\n  } else {\n    log.debug(`Changed: ${filePath}`);\n    log.debug(`Last change detection: ${(new Date()).toTimeString()}`);\n    onChange();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/watcher.js","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 79\n// module chunks = 0","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 80\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\nimport mkdirp from 'mkdirp';\nimport promisify from 'es6-promisify';\n\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\nconst defaultAsyncMkdirp = promisify(mkdirp);\n\ntype PrepareArtifactsDirOptions = {\n  asyncMkdirp?: typeof defaultAsyncMkdirp,\n}\n\nexport async function prepareArtifactsDir(\n  artifactsDir: string,\n  {asyncMkdirp = defaultAsyncMkdirp}: PrepareArtifactsDirOptions = {},\n): Promise<string> {\n  try {\n    const stats = await fs.stat(artifactsDir);\n    if (!stats.isDirectory()) {\n      throw new UsageError(\n        `--artifacts-dir=\"${artifactsDir}\" exists but it is not a directory.`);\n    }\n    // If the artifactsDir already exists, check that we have the write permissions on it.\n    try {\n      await fs.access(artifactsDir, fs.W_OK);\n    } catch (accessErr) {\n      if (isErrorWithCode('EACCES', accessErr)) {\n        throw new UsageError(\n          `--artifacts-dir=\"${artifactsDir}\" exists but the user lacks ` +\n          'permissions on it.');\n      } else {\n        throw accessErr;\n      }\n    }\n  } catch (error) {\n    if (isErrorWithCode('EACCES', error)) {\n      // Handle errors when the artifactsDir cannot be accessed.\n      throw new UsageError(\n        `Cannot access --artifacts-dir=\"${artifactsDir}\" because the user ` +\n        `lacks permissions: ${error}`);\n    } else if (isErrorWithCode('ENOENT', error)) {\n      // Create the artifact dir if it doesn't exist yet.\n      try {\n        log.debug(`Creating artifacts directory: ${artifactsDir}`);\n        await asyncMkdirp(artifactsDir);\n      } catch (mkdirErr) {\n        if (isErrorWithCode('EACCES', mkdirErr)) {\n          // Handle errors when the artifactsDir cannot be created for lack of permissions.\n          throw new UsageError(\n            `Cannot create --artifacts-dir=\"${artifactsDir}\" because the ` +\n            `user lacks permissions: ${mkdirErr}`);\n        } else {\n          throw mkdirErr;\n        }\n      }\n    } else {\n      throw error;\n    }\n  }\n\n  return artifactsDir;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/artifacts.js","/* @flow */\nimport defaultADB from 'adbkit';\n\nimport {\n  isErrorWithCode,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\nexport type ADBUtilsParams = {|\n  adb?: typeof defaultADB,\n  // ADB configs.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n|};\n\nexport type DiscoveryParams = {|\n  maxDiscoveryTime: number,\n  retryInterval: number,\n|};\n\n// Helper function used to raise an UsageError when the adb binary has not been found.\nasync function wrapADBCall(asyncFn: (...any) => Promise<any>): Promise<any> {\n  try {\n    return await asyncFn();\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error) &&\n        error.message.includes('spawn adb')) {\n      throw new UsageError(\n        'No adb executable has been found. ' +\n          'You can Use --adb-bin, --adb-host/--adb-port ' +\n          'to configure it manually if needed.');\n    }\n\n    throw error;\n  }\n}\n\nexport default class ADBUtils {\n  params: ADBUtilsParams;\n  adb: typeof defaultADB;\n  adbClient: any; // TODO: better flow typing here.\n\n  // Map<deviceId -> artifactsDir>\n  artifactsDirMap: Map<string, string>;\n  // Toggled when the user wants to abort the RDP Unix Socket discovery loop\n  // while it is still executing.\n  userAbortDiscovery: boolean;\n\n  constructor(params: ADBUtilsParams) {\n    this.params = params;\n\n    const {\n      adb,\n      adbBin,\n      adbHost,\n      adbPort,\n    } = params;\n\n    this.adb = adb || defaultADB;\n\n    this.adbClient = this.adb.createClient({\n      bin: adbBin,\n      host: adbHost,\n      port: adbPort,\n    });\n\n    this.artifactsDirMap = new Map();\n\n    this.userAbortDiscovery = false;\n  }\n\n  runShellCommand(\n    deviceId: string, cmd: string | Array<string>\n  ): Promise<string> {\n    const {adb, adbClient} = this;\n\n    log.debug(`Run adb shell command on ${deviceId}: ${JSON.stringify(cmd)}`);\n\n    return wrapADBCall(async () => {\n      return await adbClient.shell(deviceId, cmd).then(adb.util.readAll);\n    }).then((res) => res.toString());\n  }\n\n  async discoverDevices(): Promise<Array<string>> {\n    const {adbClient} = this;\n\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await wrapADBCall(async () => adbClient.listDevices());\n\n    return devices.map((dev) => dev.id);\n  }\n\n  async discoverInstalledFirefoxAPKs(\n    deviceId: string\n  ): Promise<Array<string>> {\n    log.debug(`Listing installed Firefox APKs on ${deviceId}`);\n\n    const pmList = await this.runShellCommand(deviceId, [\n      'pm', 'list', 'packages',\n    ]);\n\n    return pmList.split('\\n')\n      .map((line) => line.replace('package:', '').trim())\n      .filter((line) => {\n        return (\n          line.startsWith('org.mozilla.fennec') ||\n            line.startsWith('org.mozilla.firefox')\n        );\n      });\n  }\n\n  async getAndroidVersionNumber(deviceId: string): Promise<number> {\n    const androidVersion = (await this.runShellCommand(deviceId, [\n      'getprop', 'ro.build.version.sdk',\n    ])).trim();\n\n    const androidVersionNumber = parseInt(androidVersion);\n\n    // No need to check the granted runtime permissions on Android versions < Lollypop.\n    if (isNaN(androidVersionNumber)) {\n      throw new WebExtError(\n        'Unable to discovery android version on ' +\n        `${deviceId}: ${androidVersion}`\n      );\n    }\n\n    return androidVersionNumber;\n  }\n\n  // Raise an UsageError when the given APK does not have the required runtime permissions.\n  async ensureRequiredAPKRuntimePermissions(\n    deviceId: string, apk: string, permissions: Array<string>\n  ): Promise<void> {\n    const permissionsMap = {};\n\n    // Initialize every permission to false in the permissions map.\n    for (const perm of permissions) {\n      permissionsMap[perm] = false;\n    }\n\n    // Retrieve the permissions information for the given apk.\n    const pmDumpLogs = (await this.runShellCommand(deviceId, [\n      'pm', 'dump', apk,\n    ])).split('\\n');\n\n    // Set to true the required permissions that have been granted.\n    for (const line of pmDumpLogs) {\n      for (const perm of permissions) {\n        if (line.includes(`${perm}: granted=true`)) {\n          permissionsMap[perm] = true;\n        }\n      }\n    }\n\n    for (const perm of permissions) {\n      if (!permissionsMap[perm]) {\n        throw new UsageError(\n          `Required ${perm} has not be granted for ${apk}. ` +\n          'Please grant them using the Android Settings ' +\n          'or using the following adb command:\\n' +\n          `\\t adb shell pm grant ${apk} ${perm}\\n`\n        );\n      }\n    }\n  }\n\n  async amForceStopAPK(deviceId: string, apk: string): Promise<void> {\n    await this.runShellCommand(deviceId, [\n      'am', 'force-stop', apk,\n    ]);\n  }\n\n  async getOrCreateArtifactsDir(deviceId: string): Promise<string> {\n    let artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (artifactsDir) {\n      return artifactsDir;\n    }\n\n    artifactsDir = `/sdcard/web-ext-artifacts-${Date.now()}`;\n\n    const testDirOut = (await this.runShellCommand(\n      deviceId, `test -d ${artifactsDir} ; echo $?`\n    )).trim();\n\n    if (testDirOut !== '1') {\n      throw new WebExtError(\n        `Cannot create artifacts directory ${artifactsDir} ` +\n        `because it exists on ${deviceId}.`\n      );\n    }\n\n    await this.runShellCommand(deviceId, ['mkdir', '-p', artifactsDir]);\n\n    this.artifactsDirMap.set(deviceId, artifactsDir);\n\n    return artifactsDir;\n  }\n\n  async clearArtifactsDir(deviceId: string): Promise<void> {\n    const artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (!artifactsDir) {\n      // nothing to do here.\n      return;\n    }\n\n    this.artifactsDirMap.delete(deviceId);\n\n    log.debug(\n      `Removing ${artifactsDir} artifacts directory on ${deviceId} device`\n    );\n\n    await this.runShellCommand(deviceId, [\n      'rm', '-rf', artifactsDir,\n    ]);\n  }\n\n  async pushFile(\n    deviceId: string, localPath: string, devicePath: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(`Pushing ${localPath} to ${devicePath} on ${deviceId}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.push(deviceId, localPath, devicePath)\n        .then(function(transfer) {\n          return new Promise((resolve) => {\n            transfer.on('end', resolve);\n          });\n        });\n    });\n  }\n\n  async startFirefoxAPK(\n    deviceId: string, apk: string, deviceProfileDir: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(\n      `Starting ${apk} with profile ${deviceProfileDir} on ${deviceId}`\n    );\n\n    await wrapADBCall(async () => {\n      await adbClient.startActivity(deviceId, {\n        wait: true,\n        action: 'android.activity.MAIN',\n        component: `${apk}/.App`,\n        extras: [\n          {\n            key: 'args',\n            value: `-profile ${deviceProfileDir}`,\n          },\n        ],\n      });\n    });\n  }\n\n  setUserAbortDiscovery(value: boolean) {\n    this.userAbortDiscovery = value;\n  }\n\n  async discoverRDPUnixSocket(\n    deviceId: string, apk: string,\n    {maxDiscoveryTime, retryInterval}: DiscoveryParams = {}\n  ): Promise<string> {\n    let rdpUnixSockets = [];\n\n    const discoveryStartedAt = Date.now();\n\n    while (rdpUnixSockets.length === 0) {\n      if (this.userAbortDiscovery) {\n        throw new UsageError(\n          'Exiting Firefox Remote Debugging socket discovery on user request'\n        );\n      }\n\n      if (Date.now() - discoveryStartedAt > maxDiscoveryTime) {\n        throw new WebExtError(\n          'Timeout while waiting for the Android Firefox Debugger Socket'\n        );\n      }\n\n      rdpUnixSockets = (await this.runShellCommand(deviceId, [\n        'cat', '/proc/net/unix',\n      ])).split('\\n').filter((line) => {\n        // The RDP unix socket is expected to be a path in the form:\n        //   /data/data/org.mozilla.fennec_rpl/firefox-debugger-socket\n        return line.trim().endsWith(`${apk}/firefox-debugger-socket`);\n      });\n\n      if (rdpUnixSockets.length === 0) {\n        await new Promise((resolve) => setTimeout(resolve, retryInterval));\n      }\n    }\n\n    // Convert into an array of unix socket filenames.\n    rdpUnixSockets = rdpUnixSockets.map((line) => {\n      return line.trim().split(/\\s/).pop();\n    });\n\n    if (rdpUnixSockets.length > 1) {\n      throw new WebExtError(\n        'Unexpected multiple RDP sockets: ' +\n        `${JSON.stringify(rdpUnixSockets)}`\n      );\n    }\n\n    return rdpUnixSockets[0];\n  }\n\n  async setupForward(deviceId: string, remote: string, local: string) {\n    const {adbClient} = this;\n\n    // TODO(rpl): we should use adb.listForwards and reuse the existing one if any (especially\n    // because adbkit doesn't seem to support `adb forward --remote` yet).\n    log.debug(`Configuring ADB forward for ${deviceId}: ${remote} -> ${local}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.forward(deviceId, local, remote);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/adb.js","/* @flow */\nimport {WebExtError, UsageError} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\nexport const nonOverridablePreferences = [\n  'devtools.debugger.remote-enabled', 'devtools.debugger.prompt-connection',\n  'xpinstall.signatures.required',\n];\n\n// Flow Types\n\nexport type FirefoxPreferences = {\n  [key: string]: boolean | string | number,\n};\n\nexport type PreferencesAppName = 'firefox' | 'fennec';\n\n\n// Preferences Maps\n\nconst prefsCommon: FirefoxPreferences = {\n  // Allow debug output via dump to be printed to the system console\n  'browser.dom.window.dump.enabled': true,\n  // Warn about possibly incorrect code.\n  'javascript.options.strict': true,\n  'javascript.options.showInConsole': true,\n\n  // Allow remote connections to the debugger.\n  'devtools.debugger.remote-enabled': true,\n  // Disable the prompt for allowing connections.\n  'devtools.debugger.prompt-connection': false,\n\n  // Turn off platform logging because it is a lot of info.\n  'extensions.logging.enabled': false,\n\n  // Disable extension updates and notifications.\n  'extensions.checkCompatibility.nightly': false,\n  'extensions.update.enabled': false,\n  'extensions.update.notifyUser': false,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l372\n  // Only load extensions from the application and user profile.\n  // AddonManager.SCOPE_PROFILE + AddonManager.SCOPE_APPLICATION\n  'extensions.enabledScopes': 5,\n  // Disable metadata caching for installed add-ons by default.\n  'extensions.getAddons.cache.enabled': false,\n  // Disable intalling any distribution add-ons.\n  'extensions.installDistroAddons': false,\n  // Allow installing extensions dropped into the profile folder.\n  'extensions.autoDisableScopes': 10,\n\n  // Disable app update.\n  'app.update.enabled': false,\n\n  // Allow unsigned add-ons.\n  'xpinstall.signatures.required': false,\n};\n\n// Prefs specific to Firefox for Android.\nconst prefsFennec: FirefoxPreferences = {\n  'browser.console.showInPanel': true,\n  'browser.firstrun.show.uidiscovery': false,\n  'devtools.remote.usb.enabled': true,\n};\n\n// Prefs specific to Firefox for desktop.\nconst prefsFirefox: FirefoxPreferences = {\n  'browser.startup.homepage': 'about:blank',\n  'startup.homepage_welcome_url': 'about:blank',\n  'startup.homepage_welcome_url.additional': '',\n  'devtools.errorconsole.enabled': true,\n  'devtools.chrome.enabled': true,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l388\n  // Make url-classifier updates so rare that they won't affect tests.\n  'urlclassifier.updateinterval': 172800,\n  // Point the url-classifier to a nonexistent local URL for fast failures.\n  'browser.safebrowsing.provider.0.gethashURL':\n    'http://localhost/safebrowsing-dummy/gethash',\n  'browser.safebrowsing.provider.0.keyURL':\n    'http://localhost/safebrowsing-dummy/newkey',\n  'browser.safebrowsing.provider.0.updateURL':\n    'http://localhost/safebrowsing-dummy/update',\n\n  // Disable self repair/SHIELD\n  'browser.selfsupport.url': 'https://localhost/selfrepair',\n  // Disable Reader Mode UI tour\n  'browser.reader.detectedFirstArticle': true,\n\n  // Set the policy firstURL to an empty string to prevent\n  // the privacy info page to be opened on every \"web-ext run\".\n  // (See #1114 for rationale)\n  'datareporting.policy.firstRunURL': '',\n};\n\nconst prefs = {\n  common: prefsCommon,\n  fennec: prefsFennec,\n  firefox: prefsFirefox,\n};\n\n\n// Module exports\n\nexport type PreferencesGetterFn =\n  (appName: PreferencesAppName) => FirefoxPreferences;\n\nexport function getPrefs(\n  app: PreferencesAppName = 'firefox'\n): FirefoxPreferences {\n  const appPrefs = prefs[app];\n  if (!appPrefs) {\n    throw new WebExtError(`Unsupported application: ${app}`);\n  }\n  return {\n    ...prefsCommon,\n    ...appPrefs,\n  };\n}\n\nexport function coerceCLICustomPreference(\n  cliPrefs: Array<string>\n): FirefoxPreferences {\n  const customPrefs = {};\n\n  for (const pref of cliPrefs) {\n    const prefsAry = pref.split('=');\n\n    if (prefsAry.length < 2) {\n      throw new UsageError(\n        `Incomplete custom preference: \"${pref}\". ` +\n        'Syntax expected: \"prefname=prefvalue\".'\n      );\n    }\n\n    const key = prefsAry[0];\n    let value = prefsAry.slice(1).join('=');\n\n    if (/[^\\w{@}.-]/.test(key)) {\n      throw new UsageError(`Invalid custom preference name: ${key}`);\n    }\n\n    if (value === `${parseInt(value)}`) {\n      value = parseInt(value, 10);\n    } else if (value === 'true' || value === 'false') {\n      value = (value === 'true');\n    }\n\n    if (nonOverridablePreferences.includes(key)) {\n      log.warn(`'${key}' preference cannot be customized.`);\n      continue;\n    }\n    customPrefs[`${key}`] = value;\n  }\n\n  return customPrefs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/preferences.js","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 84\n// module chunks = 0","module.exports = require(\"tty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tty\"\n// module id = 85\n// module chunks = 0","/* @flow */\nimport tmp from 'tmp';\nimport promisify from 'es6-promisify';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n\n/*\n * Work with a self-destructing temporary directory in a promise chain.\n *\n * The directory will be destroyed when the promise chain is finished\n * (whether there was an error or not).\n *\n * Usage:\n *\n * withTempDir(\n *   (tmpDir) =>\n *     doSomething(tmpDir.path())\n *     .then(...)\n * );\n *\n */\nexport function withTempDir(makePromise: Function): Promise<any> {\n  const tmpDir = new TempDir();\n  return tmpDir.create()\n    .then(() => {\n      return makePromise(tmpDir);\n    })\n    .catch(tmpDir.errorHandler())\n    .then(tmpDir.successHandler());\n}\n\n\n/*\n * Work with a self-destructing temporary directory object.\n *\n * It is safer to use withTempDir() instead but if you know\n * what you're doing you can use it directly like:\n *\n * let tmpDir = new TempDir();\n * tmpDir.create()\n *   .then(() => {\n *     // work with tmpDir.path()\n *   })\n *   .catch(tmpDir.errorHandler())\n *   .then(tmpDir.successHandler());\n *\n */\nexport class TempDir {\n  _path: string | void;\n  _removeTempDir: Function | void;\n\n  constructor() {\n    this._path = undefined;\n    this._removeTempDir = undefined;\n  }\n\n  /*\n   * Returns a promise that is fulfilled when the temp directory has\n   * been created.\n   */\n  create(): Promise<TempDir> {\n    const createTempDir = promisify(tmp.dir, {multiArgs: true});\n    return createTempDir(\n      {\n        prefix: 'tmp-web-ext-',\n        // This allows us to remove a non-empty tmp dir.\n        unsafeCleanup: true,\n      })\n      .then((args) => {\n        const [tmpPath, removeTempDir] = args;\n        this._path = tmpPath;\n        this._removeTempDir = removeTempDir;\n        log.debug(`Created temporary directory: ${this.path()}`);\n        return this;\n      });\n  }\n\n  /*\n   * Get the absolute path of the temp directory.\n   */\n  path(): string {\n    if (!this._path) {\n      throw new Error('You cannot access path() before calling create()');\n    }\n    return this._path;\n  }\n\n  /*\n   * Returns a callback that will catch an error, remove\n   * the temporary directory, and throw the error.\n   *\n   * This is intended for use in a promise like\n   * Promise().catch(tmp.errorHandler())\n   */\n  errorHandler(): Function {\n    return (error) => {\n      this.remove();\n      throw error;\n    };\n  }\n\n  /*\n   * Returns a callback that will remove the temporary direcotry.\n   *\n   * This is intended for use in a promise like\n   * Promise().then(tmp.successHandler())\n   */\n  successHandler(): Function {\n    return (promiseResult) => {\n      this.remove();\n      return promiseResult;\n    };\n  }\n\n  /*\n   * Remove the temp directory.\n   */\n  remove() {\n    if (!this._removeTempDir) {\n      return;\n    }\n    log.debug(`Removing temporary directory: ${this.path()}`);\n    this._removeTempDir && this._removeTempDir();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/temp-dir.js","/* @flow */\nimport {main} from './program';\nimport cmd from './cmd';\nimport * as logger from './util/logger';\n\n// This only exposes util/logger so far.\n// Do we need anything else?\nconst util = {logger};\n\nexport default {main, cmd, util};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/* @flow */\nimport os from 'os';\nimport path from 'path';\nimport {readFileSync} from 'fs';\n\nimport camelCase from 'camelcase';\nimport git from 'git-rev-sync';\nimport yargs from 'yargs';\n\nimport defaultCommands from './cmd';\nimport {UsageError} from './errors';\nimport {createLogger, consoleStream as defaultLogStream} from './util/logger';\nimport {coerceCLICustomPreference} from './firefox/preferences';\nimport {checkForUpdates as defaultUpdateChecker} from './util/updates';\nimport {\n  discoverConfigFiles as defaultConfigDiscovery,\n  loadJSConfigFile as defaultLoadJSConfigFile,\n  applyConfigToArgv as defaultApplyConfigToArgv,\n} from './config';\n\nconst log = createLogger(__filename);\nconst envPrefix = 'WEB_EXT';\n\n\ntype ProgramOptions = {|\n  absolutePackageDir?: string,\n|}\n\nexport type VersionGetterFn = (absolutePackageDir: string) => string;\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype ExecuteOptions = {\n  checkForUpdates?: Function,\n  systemProcess?: typeof process,\n  logStream?: typeof defaultLogStream,\n  getVersion?: VersionGetterFn,\n  applyConfigToArgv?: typeof defaultApplyConfigToArgv,\n  discoverConfigFiles?: typeof defaultConfigDiscovery,\n  loadJSConfigFile?: typeof defaultLoadJSConfigFile,\n  shouldExitProgram?: boolean,\n  globalEnv?: string,\n}\n\n\n/*\n * The command line program.\n */\nexport class Program {\n  yargs: any;\n  commands: { [key: string]: Function };\n  shouldExitProgram: boolean;\n  verboseEnabled: boolean;\n  options: Object;\n\n  constructor(\n    argv: ?Array<string>,\n    {\n      absolutePackageDir = process.cwd(),\n    }: ProgramOptions = {}\n  ) {\n    // This allows us to override the process argv which is useful for\n    // testing.\n    // NOTE: process.argv.slice(2) removes the path to node and web-ext\n    // executables from the process.argv array.\n    argv = argv || process.argv.slice(2);\n\n    // NOTE: always initialize yargs explicitly with the package dir\n    // so that we are sure that it is going to load the 'boolean-negation: false'\n    // config (See web-ext#469 for rationale).\n    const yargsInstance = yargs(argv, absolutePackageDir);\n\n    this.verboseEnabled = false;\n    this.shouldExitProgram = true;\n    this.yargs = yargsInstance;\n    this.yargs.strict();\n\n    this.commands = {};\n    this.options = {};\n  }\n\n  command(\n    name: string, description: string, executor: Function,\n    commandOptions: Object = {}\n  ): Program {\n    this.options[camelCase(name)] = commandOptions;\n\n    this.yargs.command(name, description, (yargsForCmd) => {\n      if (!commandOptions) {\n        return;\n      }\n      return yargsForCmd\n        // Make sure the user does not add any extra commands. For example,\n        // this would be a mistake because lint does not accept arguments:\n        // web-ext lint ./src/path/to/file.js\n        .demandCommand(0, 0, undefined,\n                       'This command does not take any arguments')\n        .strict()\n        .exitProcess(this.shouldExitProgram)\n        // Calling env() will be unnecessary after\n        // https://github.com/yargs/yargs/issues/486 is fixed\n        .env(envPrefix)\n        .options(commandOptions);\n    });\n    this.commands[name] = executor;\n    return this;\n  }\n\n  setGlobalOptions(options: Object): Program {\n    // This is a convenience for setting global options.\n    // An option is only global (i.e. available to all sub commands)\n    // with the `global` flag so this makes sure every option has it.\n    this.options = {...this.options, ...options};\n    Object.keys(options).forEach((key) => {\n      options[key].global = true;\n      if (options[key].demand === undefined) {\n        // By default, all options should be \"demanded\" otherwise\n        // yargs.strict() will think they are missing when declared.\n        options[key].demand = true;\n      }\n    });\n    this.yargs.options(options);\n    return this;\n  }\n\n  enableVerboseMode(\n    logStream: typeof defaultLogStream,\n    version: string\n  ): void {\n    if (this.verboseEnabled) {\n      return;\n    }\n\n    logStream.makeVerbose();\n    log.info('Version:', version);\n    this.verboseEnabled = true;\n  }\n\n  async execute(\n    absolutePackageDir: string,\n    {\n      checkForUpdates = defaultUpdateChecker,\n      systemProcess = process,\n      logStream = defaultLogStream,\n      getVersion = defaultVersionGetter,\n      applyConfigToArgv = defaultApplyConfigToArgv,\n      discoverConfigFiles = defaultConfigDiscovery,\n      loadJSConfigFile = defaultLoadJSConfigFile,\n      shouldExitProgram = true,\n      globalEnv = WEBEXT_BUILD_ENV,\n    }: ExecuteOptions = {}\n  ): Promise<void> {\n    this.shouldExitProgram = shouldExitProgram;\n    this.yargs.exitProcess(this.shouldExitProgram);\n\n    const argv = this.yargs.argv;\n    const cmd = argv._[0];\n\n    const version = getVersion(absolutePackageDir);\n    const runCommand = this.commands[cmd];\n\n    if (argv.verbose) {\n      this.enableVerboseMode(logStream, version);\n    }\n\n    let adjustedArgv = {...argv};\n\n    try {\n      if (cmd === undefined) {\n        throw new UsageError('No sub-command was specified in the args');\n      }\n      if (!runCommand) {\n        throw new UsageError(`Unknown command: ${cmd}`);\n      }\n      if (globalEnv === 'production') {\n        checkForUpdates ({\n          version: getVersion(absolutePackageDir),\n        });\n      }\n\n      const configFiles = [];\n\n      if (argv.configDiscovery) {\n        log.debug(\n          'Discovering config files. ' +\n          'Set --no-config-discovery to disable');\n        const discoveredConfigs = await discoverConfigFiles();\n        configFiles.push(...discoveredConfigs);\n      } else {\n        log.debug('Not discovering config files');\n      }\n\n      if (argv.config) {\n        configFiles.push(path.resolve(argv.config));\n      }\n\n      if (configFiles.length) {\n        const niceFileList = configFiles\n          .map((f) => f.replace(process.cwd(), '.'))\n          .map((f) => f.replace(os.homedir(), '~'))\n          .join(', ');\n        log.info(\n          'Applying config file' +\n          `${configFiles.length !== 1 ? 's' : ''}: ` +\n          `${niceFileList}`);\n      }\n\n      configFiles.forEach((configFileName) => {\n        const configObject = loadJSConfigFile(configFileName);\n        adjustedArgv = applyConfigToArgv({\n          argv: adjustedArgv,\n          argvFromCLI: argv,\n          configFileName,\n          configObject,\n          options: this.options,\n        });\n      });\n\n      if (adjustedArgv.verbose) {\n        // Ensure that the verbose is enabled when specified in a config file.\n        this.enableVerboseMode(logStream, version);\n      }\n\n      await runCommand(adjustedArgv, {shouldExitProgram});\n\n    } catch (error) {\n      if (!(error instanceof UsageError) || adjustedArgv.verbose) {\n        log.error(`\\n${error.stack}\\n`);\n      } else {\n        log.error(`\\n${error}\\n`);\n      }\n      if (error.code) {\n        log.error(`Error code: ${error.code}\\n`);\n      }\n\n      log.debug(`Command executed: ${cmd}`);\n\n      if (this.shouldExitProgram) {\n        systemProcess.exit(1);\n      } else {\n        throw error;\n      }\n    }\n  }\n}\n\n// A global variable generated by DefinePlugin, generated in webpack.config.js\ndeclare var WEBEXT_BUILD_ENV: string;\n\n//A defintion of type of argument for defaultVersionGetter\ntype VersionGetterOptions = {\n  globalEnv?: string,\n};\n\nexport function defaultVersionGetter(\n  absolutePackageDir: string,\n  {globalEnv = WEBEXT_BUILD_ENV}: VersionGetterOptions = {}\n): string {\n  if (globalEnv === 'production') {\n    log.debug('Getting the version from package.json');\n    const packageData: any = readFileSync(\n      path.join(absolutePackageDir, 'package.json'));\n    return JSON.parse(packageData).version;\n  } else {\n    log.debug('Getting version from the git revision');\n    return `${git.branch(absolutePackageDir)}-${git.long(absolutePackageDir)}`;\n  }\n}\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype MainParams = {\n  getVersion?: VersionGetterFn,\n  commands?: Object,\n  argv: Array<any>,\n  runOptions?: Object,\n}\n\nexport function main(\n  absolutePackageDir: string,\n  {\n    getVersion = defaultVersionGetter, commands = defaultCommands, argv,\n    runOptions = {},\n  }: MainParams = {}\n): Promise<any> {\n\n  const program = new Program(argv, {absolutePackageDir});\n\n  // yargs uses magic camel case expansion to expose options on the\n  // final argv object. For example, the 'artifacts-dir' option is alternatively\n  // available as argv.artifactsDir.\n  program.yargs\n    .usage(`Usage: $0 [options] command\n\nOption values can also be set by declaring an environment variable prefixed\nwith $${envPrefix}_. For example: $${envPrefix}_SOURCE_DIR=/path is the same as\n--source-dir=/path.\n\nTo view specific help for any given command, add the command name.\nExample: $0 --help run.\n`)\n    .help('help')\n    .alias('h', 'help')\n    .env(envPrefix)\n    .version(() => getVersion(absolutePackageDir))\n    .demandCommand(1, 'You must specify a command')\n    .strict();\n\n  program.setGlobalOptions({\n    'source-dir': {\n      alias: 's',\n      describe: 'Web extension source directory.',\n      default: process.cwd(),\n      requiresArg: true,\n      type: 'array',\n      coerce: params => params.map(p => path.resolve(p)),\n    },\n    'artifacts-dir': {\n      alias: 'a',\n      describe: 'Directory where artifacts will be saved.',\n      default: path.join(process.cwd(), 'web-ext-artifacts'),\n      normalize: true,\n      requiresArg: true,\n      type: 'string',\n    },\n    'verbose': {\n      alias: 'v',\n      describe: 'Show verbose output',\n      type: 'boolean',\n    },\n    'ignore-files': {\n      alias: 'i',\n      describe: 'A list of glob patterns to define which files should be ' +\n                'ignored. (Example: --ignore-files=path/to/first.js ' +\n                'path/to/second.js \"**/*.log\")',\n      demand: false,\n      requiresArg: true,\n      type: 'array',\n    },\n    'no-input': {\n      describe: 'Disable all features that require standard input',\n      type: 'boolean',\n    },\n    'config': {\n      alias: 'c',\n      describe: 'Path to a CommonJS config file to set ' +\n        'option defaults',\n      default: undefined,\n      demand: false,\n      requiresArg: true,\n      type: 'string',\n    },\n    'config-discovery': {\n      describe: 'Discover config files in home directory and ' +\n        'working directory. Disable with --no-config-discovery.',\n      demand: false,\n      default: true,\n      type: 'boolean',\n    },\n  });\n\n  program\n    .command(\n      'build',\n      'Create an extension package from source',\n      commands.build, {\n        'as-needed': {\n          describe: 'Watch for file changes and re-build as needed',\n          type: 'boolean',\n        },\n        'overwrite-dest': {\n          alias: 'o',\n          describe: 'Overwrite destination package if it exists.',\n          type: 'boolean',\n        },\n      })\n    .command(\n      'sign',\n      'Sign the extension so it can be installed in Firefox',\n      commands.sign, {\n        'api-key': {\n          describe: 'API key (JWT issuer) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-secret': {\n          describe: 'API secret (JWT secret) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-url-prefix': {\n          describe: 'Signing API URL prefix',\n          default: 'https://addons.mozilla.org/api/v3',\n          demand: true,\n          type: 'string',\n        },\n        'api-proxy': {\n          describe:\n            'Use a proxy to access the signing API. ' +\n            'Example: https://yourproxy:6000 ',\n          demand: false,\n          type: 'string',\n        },\n        'id': {\n          describe:\n            'A custom ID for the extension. This has no effect if the ' +\n            'extension already declares an explicit ID in its manifest.',\n          demand: false,\n          type: 'string',\n        },\n        'timeout': {\n          describe: 'Number of milliseconds to wait before giving up',\n          type: 'number',\n        },\n      })\n    .command('run', 'Run the extension', commands.run, {\n      'target': {\n        alias: 't',\n        describe: 'The extensions runners to enable (e.g. firefox-desktop, ' +\n                  'firefox-android). Specify this option multiple times to ' +\n                  'run against multiple targets.',\n        default: 'firefox-desktop',\n        demand: false,\n        type: 'array',\n      },\n      'firefox': {\n        alias: ['f', 'firefox-binary'],\n        describe: 'Path or alias to a Firefox executable such as firefox-bin ' +\n                  'or firefox.exe. ' +\n                  'If not specified, the default Firefox will be used. ' +\n                  'You can specify the following aliases in lieu of a path: ' +\n                  'firefox, beta, nightly, firefoxdeveloperedition.',\n        demand: false,\n        type: 'string',\n      },\n      'firefox-profile': {\n        alias: 'p',\n        describe: 'Run Firefox using a copy of this profile. The profile ' +\n                  'can be specified as a directory or a name, such as one ' +\n                  'you would see in the Profile Manager. If not specified, ' +\n                  'a new temporary profile will be created.',\n        demand: false,\n        type: 'string',\n      },\n      'keep-profile-changes': {\n        describe: 'Run Firefox directly in custom profile. Any changes to ' +\n                  'the profile will be saved.',\n        demand: false,\n        type: 'boolean',\n      },\n      'no-reload': {\n        describe: 'Do not reload the extension when source files change',\n        demand: false,\n        type: 'boolean',\n      },\n      'pre-install': {\n        describe: 'Pre-install the extension into the profile before ' +\n                  'startup. This is only needed to support older versions ' +\n                  'of Firefox.',\n        demand: false,\n        type: 'boolean',\n      },\n      'pref': {\n        describe: 'Launch firefox with a custom preference ' +\n                  '(example: --pref=general.useragent.locale=fr-FR). ' +\n                  'You can repeat this option to set more than one ' +\n                  'preference.',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n        coerce: coerceCLICustomPreference,\n      },\n      'start-url': {\n        alias: ['u', 'url'],\n        describe: 'Launch firefox at specified page',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n      },\n      'browser-console': {\n        alias: ['bc'],\n        describe: 'Open the DevTools Browser Console.',\n        demand: false,\n        type: 'boolean',\n      },\n      // Firefox for Android CLI options.\n      'adb-bin': {\n        describe: 'Specify a custom path to the adb binary',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-host': {\n        describe: 'Connect to adb on the specified host',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-port': {\n        describe: 'Connect to adb on the specified port',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-device': {\n        alias: ['android-device'],\n        describe: 'Connect to the specified adb device name',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'firefox-apk': {\n        describe: (\n          'Run a specific Firefox for Android APK. ' +\n          'Example: org.mozilla.fennec_aurora'\n        ),\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n    })\n    .command('lint', 'Validate the extension source', commands.lint, {\n      'output': {\n        alias: 'o',\n        describe: 'The type of output to generate',\n        type: 'string',\n        default: 'text',\n        choices: ['json', 'text'],\n      },\n      'metadata': {\n        describe: 'Output only metadata as JSON',\n        type: 'boolean',\n        default: false,\n      },\n      'warnings-as-errors': {\n        describe: 'Treat warnings as errors by exiting non-zero for warnings',\n        alias: 'w',\n        type: 'boolean',\n        default: false,\n      },\n      'pretty': {\n        describe: 'Prettify JSON output',\n        type: 'boolean',\n        default: false,\n      },\n      'self-hosted': {\n        describe:\n          'Your extension will be self-hosted. This disables messages ' +\n          'related to hosting on addons.mozilla.org.',\n        type: 'boolean',\n        default: false,\n      },\n      'boring': {\n        describe: 'Disables colorful shell output',\n        type: 'boolean',\n        default: false,\n      },\n    })\n    .command('docs', 'Open the web-ext documentation in a browser',\n             commands.docs, {});\n\n  return program.execute(absolutePackageDir, runOptions);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/program.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 89\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = 90\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = 91\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 92\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 93\n// module chunks = 0","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 94\n// module chunks = 0","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 95\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 96\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 97\n// module chunks = 0","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 98\n// module chunks = 0","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 99\n// module chunks = 0","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 100\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/promise.js\n// module id = 101\n// module chunks = 0","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/promise.js\n// module id = 102\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 103\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 104\n// module chunks = 0","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 105\n// module chunks = 0","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value);\n            if (domain) domain.exit();\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.promise.js\n// module id = 106\n// module chunks = 0","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-instance.js\n// module id = 107\n// module chunks = 0","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_for-of.js\n// module id = 108\n// module chunks = 0","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_invoke.js\n// module id = 109\n// module chunks = 0","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    var promise = Promise.resolve();\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_microtask.js\n// module id = 110\n// module chunks = 0","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine-all.js\n// module id = 111\n// module chunks = 0","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-species.js\n// module id = 112\n// module chunks = 0","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.finally.js\n// module id = 113\n// module chunks = 0","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.try.js\n// module id = 114\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = 115\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = 116\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = 117\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = 118\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 119\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 120\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 121\n// module chunks = 0","module.exports = require(\"git-rev-sync\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"git-rev-sync\"\n// module id = 122\n// module chunks = 0","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 123\n// module chunks = 0","module.exports = require(\"watchpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"watchpack\"\n// module id = 124\n// module chunks = 0","module.exports = require(\"debounce\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debounce\"\n// module id = 125\n// module chunks = 0","module.exports = require(\"bunyan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bunyan\"\n// module id = 126\n// module chunks = 0","/* @flow */\nimport zipDirModule from 'zip-dir';\nimport promisify from 'es6-promisify';\n\nexport const zipDir = promisify(zipDirModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/zip-dir.js","module.exports = require(\"zip-dir\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zip-dir\"\n// module id = 128\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/is-iterable.js\n// module id = 129\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/is-iterable.js\n// module id = 130\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.is-iterable.js\n// module id = 131\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = 132\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = 133\n// module chunks = 0","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = 134\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 135\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 136\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 137\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 138\n// module chunks = 0","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 139\n// module chunks = 0","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 140\n// module chunks = 0","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 141\n// module chunks = 0","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 142\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 143\n// module chunks = 0","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 144\n// module chunks = 0","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 145\n// module chunks = 0","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 146\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = 147\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 148\n// module chunks = 0","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = 149\n// module chunks = 0","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 150\n// module chunks = 0","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = 151\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = 152\n// module chunks = 0","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = 153\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = 154\n// module chunks = 0","module.exports = require(\"es6-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-error\"\n// module id = 155\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 156\n// module chunks = 0","module.exports = require(\"minimatch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"minimatch\"\n// module id = 157\n// module chunks = 0","/* @flow */\nimport {createInstance as defaultLinterCreator} from 'addons-linter';\n\nimport {createLogger} from '../util/logger';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\n// import flow types\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\n// Define the needed 'addons-linter' module flow types.\n\nexport type LinterOutputType = 'text' | 'json';\n\nexport type LinterCreatorParams = {|\n  config: {|\n    logLevel: 'debug' | 'fatal',\n    stack: boolean,\n    pretty?: boolean,\n    warningsAsErrors?: boolean,\n    metadata?: boolean,\n    output?: LinterOutputType,\n    boring?: boolean,\n    selfHosted?: boolean,\n    shouldScanFile: (fileName: string) => boolean,\n    _: Array<string>,\n  |},\n  runAsBinary: boolean,\n|};\n\nexport type Linter = {|\n  run: () => Promise<void>,\n|};\n\nexport type LinterCreatorFn = (params: LinterCreatorParams) => Linter;\n\n\n// Lint command types and implementation.\n\nexport type LintCmdParams = {|\n  artifactsDir?: string,\n  boring?: boolean,\n  ignoreFiles?: Array<string>,\n  metadata?: boolean,\n  output?: LinterOutputType,\n  pretty?: boolean,\n  selfHosted?: boolean,\n  sourceDir: string,\n  verbose?: boolean,\n  warningsAsErrors?: boolean,\n|};\n\nexport type LintCmdOptions = {|\n  createLinter?: LinterCreatorFn,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default function lint(\n  {\n    artifactsDir,\n    boring,\n    ignoreFiles,\n    metadata,\n    output,\n    pretty,\n    sourceDir,\n    selfHosted,\n    verbose,\n    warningsAsErrors,\n  }: LintCmdParams,\n  {\n    createLinter = defaultLinterCreator,\n    createFileFilter = defaultFileFilterCreator,\n    shouldExitProgram = true,\n  }: LintCmdOptions = {}\n): Promise<void> {\n  const fileFilter = createFileFilter({sourceDir, ignoreFiles, artifactsDir});\n\n  log.debug(`Running addons-linter on ${sourceDir}`);\n  const linter = createLinter({\n    config: {\n      logLevel: verbose ? 'debug' : 'fatal',\n      stack: Boolean(verbose),\n      pretty,\n      warningsAsErrors,\n      metadata,\n      output,\n      boring,\n      selfHosted,\n      shouldScanFile: (fileName) => fileFilter.wantFile(fileName),\n      // This mimics the first command line argument from yargs,\n      // which should be the directory to the extension.\n      _: [sourceDir],\n    },\n    runAsBinary: shouldExitProgram,\n  });\n  return linter.run();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/lint.js","module.exports = require(\"addons-linter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"addons-linter\"\n// module id = 159\n// module chunks = 0","/* @flow */\nimport defaultBuildExtension from './build';\nimport DefaultADBUtils from '../util/adb';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxClient,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport defaultGetValidatedManifest from '../util/manifest';\nimport {\n  defaultReloadStrategy,\n  MultiExtensionRunner as DefaultMultiExtensionRunner,\n} from '../extension-runners';\nimport {\n  FirefoxDesktopExtensionRunner as DefaultFirefoxDesktopExtensionRunner,\n} from '../extension-runners/firefox-desktop';\nimport {\n  FirefoxAndroidExtensionRunner as defaultFirefoxAndroidExtensionRunner,\n} from '../extension-runners/firefox-android';\n// Import objects that are only used as Flow types.\nimport type {FirefoxPreferences} from '../firefox/preferences';\n\nconst log = createLogger(__filename);\n\n\n// Run command types and implementation.\n\nexport type CmdRunParams = {|\n  artifactsDir: string,\n  browserConsole: boolean,\n  pref?: FirefoxPreferences,\n  firefox: string,\n  firefoxProfile?: string,\n  ignoreFiles?: Array<string>,\n  keepProfileChanges: boolean,\n  noInput?: boolean,\n  noReload: boolean,\n  preInstall: boolean,\n  sourceDir: Array<string>,\n  startUrl?: Array<string>,\n  target?: Array<string>,\n\n  // Android CLI options.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n|};\n\nexport type CmdRunOptions = {|\n  buildExtension: typeof defaultBuildExtension,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxClient,\n  reloadStrategy: typeof defaultReloadStrategy,\n  shouldExitProgram?: boolean,\n  FirefoxAndroidExtensionRunner?: typeof defaultFirefoxAndroidExtensionRunner,\n  FirefoxDesktopExtensionRunner?: typeof DefaultFirefoxDesktopExtensionRunner,\n  MultiExtensionRunner?: typeof DefaultMultiExtensionRunner,\n  getValidatedManifest?: typeof defaultGetValidatedManifest,\n|};\n\nexport default async function run(\n  {\n    artifactsDir,\n    browserConsole = false,\n    pref,\n    firefox,\n    firefoxProfile,\n    keepProfileChanges = false,\n    ignoreFiles,\n    noInput = false,\n    noReload = false,\n    preInstall = false,\n    sourceDir,\n    startUrl,\n    target,\n    // Android CLI options.\n    adbBin,\n    adbHost,\n    adbPort,\n    adbDevice,\n    firefoxApk,\n  }: CmdRunParams,\n  {\n    buildExtension = defaultBuildExtension,\n    desktopNotifications = defaultDesktopNotifications,\n    firefoxApp = defaultFirefoxApp,\n    firefoxClient = defaultFirefoxClient,\n    reloadStrategy = defaultReloadStrategy,\n    FirefoxAndroidExtensionRunner = defaultFirefoxAndroidExtensionRunner,\n    FirefoxDesktopExtensionRunner = DefaultFirefoxDesktopExtensionRunner,\n    MultiExtensionRunner = DefaultMultiExtensionRunner,\n    getValidatedManifest = defaultGetValidatedManifest,\n  }: CmdRunOptions = {}): Promise<DefaultMultiExtensionRunner> {\n\n  log.info(`Running web extension from ${sourceDir.join(',')}`);\n  if (preInstall) {\n    log.info('Disabled auto-reloading because it\\'s not possible with ' +\n             '--pre-install');\n    noReload = true;\n  }\n\n  // Create an alias for --pref since it has been transformed into an\n  // object containing one or more preferences.\n  const customPrefs = pref;\n  const extensions = await Promise.all(sourceDir.map(async (dir: string) => {\n      const manifestData = await getValidatedManifest(dir);\n      return {sourceDir: dir, manifestData};\n    }));\n\n  const runners = [];\n\n  const commonRunnerParams = {\n    // Common options.\n    extensions,\n    keepProfileChanges,\n    startUrl,\n    desktopNotifications,\n  };\n\n  if (!target || target.length === 0 || target.includes('firefox-desktop')) {\n    const firefoxDesktopRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      firefoxBinary: firefox,\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n\n      // Firefox runner injected dependencies.\n      firefoxApp,\n      firefoxClient,\n    };\n\n    const firefoxDesktopRunner = new FirefoxDesktopExtensionRunner(\n      firefoxDesktopRunnerParams\n    );\n\n    runners.push(firefoxDesktopRunner);\n  }\n\n  if (target && target.includes('firefox-android')) {\n    const firefoxAndroidRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n      firefoxApk,\n      adbDevice,\n      adbHost,\n      adbPort,\n      adbBin,\n\n      // Injected dependencies.\n      firefoxApp,\n      firefoxClient,\n      ADBUtils: DefaultADBUtils,\n      desktopNotifications: defaultDesktopNotifications,\n      buildSourceDir: (extensionSourceDir: string, tmpArtifactsDir: string) => {\n        return buildExtension({\n          sourceDir: extensionSourceDir,\n          ignoreFiles,\n          asNeeded: false,\n          // Use a separate temporary directory for building the extension zip file\n          // that we are going to upload on the android device.\n          artifactsDir: tmpArtifactsDir,\n        }, {\n          // Suppress the message usually logged by web-ext build.\n          showReadyMessage: false,\n        });\n      },\n    };\n\n    const firefoxAndroidRunner = new FirefoxAndroidExtensionRunner({\n      ...commonRunnerParams,\n      ...firefoxAndroidRunnerParams,\n    });\n\n    runners.push(firefoxAndroidRunner);\n  }\n\n  const extensionRunner = new MultiExtensionRunner({\n    desktopNotifications,\n    runners,\n  });\n\n  process.on('SIGTERM', function() {\n    extensionRunner.exit();\n  });\n  await extensionRunner.run();\n\n  if (noReload) {\n    log.info('Automatic extension reloading has been disabled');\n  }\n\n  return extensionRunner;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/run.js","module.exports = require(\"adbkit\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"adbkit\"\n// module id = 161\n// module chunks = 0","module.exports = require(\"node-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-notifier\"\n// module id = 162\n// module chunks = 0","module.exports = require(\"fx-runner\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fx-runner\"\n// module id = 163\n// module chunks = 0","module.exports = require(\"firefox-profile\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"firefox-profile\"\n// module id = 164\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {onlyErrorsWithCode} from '../errors';\n\n/*\n * Resolves true if the path is a readable directory.\n *\n * Usage:\n *\n * isDirectory('/some/path')\n *  .then((dirExists) => {\n *    // dirExists will be true or false.\n *  });\n *\n * */\nexport default function isDirectory(path: string): Promise<boolean> {\n  return fs.stat(path)\n    .then((stats) => stats.isDirectory())\n    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], () => {\n      return false;\n    }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/is-directory.js","module.exports = require(\"node-firefox-connect\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-firefox-connect\"\n// module id = 166\n// module chunks = 0","/* @flow */\n\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport type Watchpack from 'watchpack';\n\nimport type {\n  IExtensionRunner, // eslint-disable-line import/named\n  ExtensionRunnerReloadResult,\n} from './base';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport {createLogger} from '../util/logger';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\nimport defaultSourceWatcher from '../watcher';\nimport type {OnSourceChangeFn} from '../watcher';\n\n\nconst log = createLogger(__filename);\n\n\nexport type MultiExtensionRunnerParams = {|\n  runners: Array<IExtensionRunner>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n|};\n\n\n/**\n * Implements an IExtensionRunner which allow the caller to\n * manage multiple extension runners at the same time (e.g. by running\n * a Firefox Desktop instance alongside to a Firefox for Android instance).\n */\nexport class MultiExtensionRunner {\n  extensionRunners: Array<IExtensionRunner>;\n  desktopNotifications: typeof defaultDesktopNotifications;\n\n  constructor(params: MultiExtensionRunnerParams) {\n    this.extensionRunners = params.runners;\n    this.desktopNotifications = params.desktopNotifications;\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Multi Extension Runner';\n  }\n\n  /**\n   * Call the `run` method on all the managed extension runners,\n   * and awaits that all the runners has been successfully started.\n   */\n  async run(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.run());\n    }\n\n    await Promise.all(promises);\n  }\n\n  /**\n   * Reloads all the extensions on all the managed extension runners,\n   * collect any reload error, and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug('Reloading all reloadable add-ons');\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadAllExtensions().then(\n        () => {\n          return {runnerName: runner.getName()};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Reloads a single extension on all the managed extension runners,\n   * collect any reload error and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadExtensionBySourceDir(\n    sourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug(`Reloading add-on at ${sourceDir}`);\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadExtensionBySourceDir(sourceDir).then(\n        () => {\n          return {runnerName: runner.getName(), sourceDir};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n            sourceDir,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    // $FLOW_FIXME: When upgrading to Flow 0.61.0, it could not follow the type of sourceDir in the array of promises.\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Register a callback to be called when all the managed runners has been exited.\n   */\n  registerCleanup(cleanupCallback: Function): void {\n    const promises = [];\n\n    // Create a promise for every extension runner managed by this instance,\n    // the promise will be resolved when the particular runner calls its\n    // registered cleanup callbacks.\n    for (const runner of this.extensionRunners) {\n      promises.push(new Promise((resolve) => {\n        runner.registerCleanup(resolve);\n      }));\n    }\n\n    // Wait for all the created promises to be resolved or rejected\n    // (once each one of the runners has cleaned up) and then call\n    // the cleanup callback registered to this runner.\n    Promise.all(promises).then(cleanupCallback, cleanupCallback);\n  }\n\n  /**\n   * Exits all the managed runner has been exited.\n   */\n  async exit(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.exit());\n    }\n\n    await Promise.all(promises);\n  }\n\n  // Private helper methods.\n\n  handleReloadResults(results: Array<ExtensionRunnerReloadResult>): void {\n    for (const {runnerName, reloadError, sourceDir} of results) {\n      if (reloadError instanceof Error) {\n        let message = 'Error occurred while reloading';\n        if (sourceDir) {\n          message += ` \"${sourceDir}\" `;\n        }\n\n        message += `on \"${runnerName}\" - ${reloadError.message}`;\n\n        log.error(`\\n${message}`);\n        log.debug(reloadError.stack);\n\n        this.desktopNotifications({\n          title: 'web-ext run: extension reload error',\n          message,\n        });\n      }\n    }\n  }\n}\n\n// defaultWatcherCreator types and implementation.\n\nexport type WatcherCreatorParams = {|\n  reloadExtension: (string) => void,\n  sourceDir: string,\n  artifactsDir: string,\n  onSourceChange?: OnSourceChangeFn,\n  ignoreFiles?: Array<string>,\n  createFileFilter?: FileFilterCreatorFn,\n|};\n\nexport type WatcherCreatorFn = (params: WatcherCreatorParams) => Watchpack;\n\nexport function defaultWatcherCreator(\n  {\n    reloadExtension, sourceDir, artifactsDir, ignoreFiles,\n    onSourceChange = defaultSourceWatcher,\n    createFileFilter = defaultFileFilterCreator,\n  }: WatcherCreatorParams\n): Watchpack {\n  const fileFilter = createFileFilter(\n    {sourceDir, artifactsDir, ignoreFiles}\n  );\n  return onSourceChange({\n    sourceDir,\n    artifactsDir,\n    onChange: () => reloadExtension(sourceDir),\n    shouldWatchFile: (file) => fileFilter.wantFile(file),\n  });\n}\n\n\n// defaultReloadStrategy types and implementation.\n\nexport type ReloadStrategyParams = {|\n  extensionRunner: IExtensionRunner,\n  sourceDir: string,\n  artifactsDir: string,\n  ignoreFiles?: Array<string>,\n  noInput?: boolean,\n|};\n\nexport type ReloadStrategyOptions = {|\n  createWatcher?: WatcherCreatorFn,\n  stdin?: stream$Readable,\n  kill?: typeof process.kill,\n|};\n\nexport function defaultReloadStrategy(\n  {\n    artifactsDir,\n    extensionRunner,\n    ignoreFiles,\n    noInput = false,\n    sourceDir,\n  }: ReloadStrategyParams,\n  {\n    createWatcher = defaultWatcherCreator,\n    stdin = process.stdin,\n    kill = process.kill,\n  }: ReloadStrategyOptions = {}\n): void {\n  const allowInput = !noInput;\n  if (!allowInput) {\n    log.debug('Input has been disabled because of noInput==true');\n  }\n\n  const watcher: Watchpack = createWatcher({\n    reloadExtension: (watchedSourceDir) => {\n      extensionRunner.reloadExtensionBySourceDir(watchedSourceDir);\n    },\n    sourceDir,\n    artifactsDir,\n    ignoreFiles,\n  });\n\n  extensionRunner.registerCleanup(() => {\n    watcher.close();\n    if (allowInput) {\n      stdin.pause();\n    }\n  });\n\n  if (allowInput && stdin.isTTY && stdin instanceof tty.ReadStream) {\n    readline.emitKeypressEvents(stdin);\n    stdin.setRawMode(true);\n\n    const keypressUsageInfo = 'Press R to reload (and Ctrl-C to quit)';\n\n    // NOTE: this `Promise.resolve().then(...)` is basically used to spawn a \"co-routine\"\n    // that is executed before the callback attached to the Promise returned by this function\n    // (and it allows the `run` function to not be stuck in the while loop).\n    Promise.resolve().then(async function() {\n      log.info(keypressUsageInfo);\n\n      let userExit = false;\n\n      while (!userExit) {\n        const keyPressed = await new Promise((resolve) => {\n          stdin.once('keypress', (str, key) => resolve(key));\n        });\n\n        if (keyPressed.ctrl && keyPressed.name === 'c') {\n          userExit = true;\n        } else if (keyPressed.name === 'z') {\n          // Prepare to suspend.\n\n          // NOTE: Switch the raw mode off before suspending (needed to make the keypress event\n          // to work correctly when the nodejs process is resumed).\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(false);\n          }\n\n          log.info('\\nweb-ext has been suspended on user request');\n          kill(process.pid, 'SIGTSTP');\n\n          // Prepare to resume.\n\n          log.info(`\\nweb-ext has been resumed. ${keypressUsageInfo}`);\n          // Switch the raw mode on on resume.\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(true);\n          }\n        } else if (keyPressed.name === 'r') {\n          log.debug('Reloading installed extensions on user request');\n          extensionRunner.reloadAllExtensions();\n        }\n      }\n\n      log.info('\\nExiting web-ext on user request');\n      extensionRunner.exit();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/index.js","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Desktop instance.\n */\n\n// Import flow types from npm dependencies.\nimport type FirefoxProfile from 'firefox-profile';\n\nimport {\n  MultiExtensionsReloadError,\n  RemoteTempInstallNotSupported,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\n// Import flow types from project files.\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {FirefoxPreferences} from '../firefox/preferences';\nimport type {FirefoxInfo} from '../firefox/index'; // eslint-disable-line import/named\n\ntype FirefoxDesktopSpecificRunnerParams = {|\n  customPrefs?: FirefoxPreferences,\n  browserConsole: boolean,\n  firefoxBinary: string,\n  preInstall: boolean,\n\n  // Firefox desktop injected dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n|};\n\nexport type FirefoxDesktopExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n  // Firefox desktop CLI params.\n  ...FirefoxDesktopSpecificRunnerParams,\n|};\n\nconst log = createLogger(__filename);\n\n/**\n * Implements an IExtensionRunner which manages a Firefox Desktop instance.\n */\nexport class FirefoxDesktopExtensionRunner {\n  cleanupCallbacks: Set<Function>;\n  params: FirefoxDesktopExtensionRunnerParams;\n  profile: FirefoxProfile;\n  // Map extensions sourceDir to their related addon ids.\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n  runningInfo: FirefoxInfo;\n\n  constructor(params: FirefoxDesktopExtensionRunnerParams) {\n    this.params = params;\n\n    this.reloadableExtensions = new Map();\n    this.cleanupCallbacks = new Set();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Desktop';\n  }\n\n  /**\n   * Setup the Firefox Profile and run a Firefox Desktop instance.\n   */\n  async run(): Promise<void> {\n    // Get a firefox profile with the custom Prefs set (a new or a cloned one).\n    // Pre-install extensions as proxy if needed (and disable auto-reload if you do)\n    await this.setupProfileDir();\n\n    // (if reload is enabled):\n    // - Connect to the firefox instance on RDP\n    // - Install any extension if needed (if not installed as proxy)\n    // - Keep track of the extension id assigned in a map with the sourceDir as a key\n    await this.startFirefoxInstance();\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n          `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    if (!this.runningInfo || !this.runningInfo.firefox) {\n      throw new WebExtError('No firefox instance is currently running');\n    }\n\n    this.runningInfo.firefox.kill();\n  }\n\n  // Private helper methods.\n\n  async setupProfileDir() {\n    const {\n      customPrefs,\n      extensions,\n      keepProfileChanges,\n      preInstall,\n      profilePath,\n      firefoxApp,\n    } = this.params;\n\n    if (profilePath) {\n      if (keepProfileChanges) {\n        log.debug(`Using Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.useProfile(profilePath, {customPrefs});\n      } else {\n        log.debug(`Copying Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.copyProfile(profilePath, {customPrefs});\n      }\n    } else {\n      log.debug('Creating new Firefox profile');\n      this.profile = await firefoxApp.createProfile({customPrefs});\n    }\n\n    // preInstall the extensions if needed.\n    if (preInstall) {\n      for (const extension of extensions) {\n        await firefoxApp.installExtension({\n          asProxy: true,\n          extensionPath: extension.sourceDir,\n          manifestData: extension.manifestData,\n          profile: this.profile,\n        });\n      }\n    }\n  }\n\n  async startFirefoxInstance() {\n    const {\n      browserConsole,\n      extensions,\n      firefoxBinary,\n      preInstall,\n      startUrl,\n      firefoxApp,\n      firefoxClient,\n    } = this.params;\n\n    const binaryArgs = [];\n\n    if (browserConsole) {\n      binaryArgs.push('-jsconsole');\n    }\n    if (startUrl) {\n      const urls = Array.isArray(startUrl) ? startUrl : [startUrl];\n      for (const url of urls) {\n        binaryArgs.push('--url', url);\n      }\n    }\n\n    this.runningInfo = await firefoxApp.run(this.profile, {\n      firefoxBinary, binaryArgs,\n    });\n\n    this.runningInfo.firefox.on('close', () => {\n      for (const cleanupCb of this.cleanupCallbacks) {\n        try {\n          cleanupCb();\n        } catch (error) {\n          log.error(`Exception on executing cleanup callback: ${error}`);\n        }\n      }\n    });\n\n    if (!preInstall) {\n      const remoteFirefox = this.remoteFirefox = await firefoxClient({\n        port: this.runningInfo.debuggerPort,\n      });\n\n      // Install all the temporary addons.\n      for (const extension of extensions) {\n        try {\n          const addonId = await (\n            remoteFirefox.installTemporaryAddon(extension.sourceDir)\n              .then((installResult: FirefoxRDPResponseAddon) => {\n                return installResult.addon.id;\n              })\n          );\n\n          if (!addonId) {\n            throw new WebExtError(\n              'Unexpected missing addonId in the installAsTemporaryAddon result'\n            );\n          }\n\n          this.reloadableExtensions.set(extension.sourceDir, addonId);\n        } catch (error) {\n          if (error instanceof RemoteTempInstallNotSupported) {\n            log.debug(`Caught: ${error}`);\n            throw new WebExtError(\n              'Temporary add-on installation is not supported in this version' +\n              ' of Firefox (you need Firefox 49 or higher). For older Firefox' +\n              ' versions, use --pre-install'\n            );\n          } else {\n            throw error;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-desktop.js","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Android instance.\n */\n\nimport net from 'net';\nimport path from 'path';\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport {withTempDir} from '../util/temp-dir';\nimport DefaultADBUtils from '../util/adb';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport {\n  MultiExtensionsReloadError,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {\n  FirefoxPreferences,\n} from '../firefox/preferences';\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionBuildResult,\n} from '../cmd/build';\n\nconst log = createLogger(__filename);\n\nexport type FirefoxAndroidExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n\n  // Firefox specific.\n  customPrefs?: FirefoxPreferences,\n\n  // Not supported (currently ignored with logged warning).\n  preInstall?: boolean,\n  browserConsole?: boolean,\n\n  // Firefox android injected dependencies.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n  firefoxAndroidTimeout?: number,\n\n  // Injected Dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n  ADBUtils: typeof DefaultADBUtils,\n  buildSourceDir: (string, string) => Promise<ExtensionBuildResult>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  stdin?: stream$Readable,\n|};\n\n/**\n * Implements an IExtensionRunner which manages a Firefox for Android instance.\n */\nexport class FirefoxAndroidExtensionRunner {\n  // Wait 3s before the next unix socket discovery loop.\n  static unixSocketDiscoveryRetryInterval = 3 * 1000;\n  // Wait for at most 3 minutes before giving up.\n  static unixSocketDiscoveryMaxTime = 3 * 60 * 1000;\n\n  params: FirefoxAndroidExtensionRunnerParams;\n  adbUtils: DefaultADBUtils;\n  exiting: boolean;\n  selectedAdbDevice: string;\n  selectedFirefoxApk: string;\n  selectedArtifactsDir: string;\n  selectedRDPSocketFile: string;\n  selectedTCPPort: number;\n  cleanupCallbacks: Set<Function>;\n  adbExtensionsPathBySourceDir: Map<string, string>;\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n\n  constructor(params: FirefoxAndroidExtensionRunnerParams) {\n    this.params = params;\n    this.cleanupCallbacks = new Set();\n    this.adbExtensionsPathBySourceDir = new Map();\n    this.reloadableExtensions = new Map();\n\n    // Print warning for not currently supported options (e.g. preInstall,\n    // cloned profiles, browser console).\n    this.printIgnoredParamsWarnings();\n  }\n\n  async run(): Promise<void> {\n    const {\n      adbBin,\n      adbHost,\n      adbPort,\n    } = this.params;\n\n    this.adbUtils = new this.params.ADBUtils({\n      adbBin, adbHost, adbPort,\n    });\n\n    await this.adbDevicesDiscoveryAndSelect();\n    await this.apkPackagesDiscoveryAndSelect();\n    await this.adbCheckRuntimePermissions();\n    await this.adbForceStopSelectedPackage();\n\n    // Create profile prefs (with enabled remote RDP server), prepare the\n    // artifacts and temporary directory on the selected device, and\n    // push the profile preferences to the remote profile dir.\n    await this.adbPrepareProfileDir();\n\n    // NOTE: running Firefox for Android on the Android Emulator can be\n    // pretty slow, we can run the following 3 steps in parallel to speed up\n    // it a bit.\n    await Promise.all([\n      // Start Firefox for Android instance on the created profile.\n      this.adbStartSelectedPackage(),\n\n      // Build and push to devices all the extension xpis\n      // and keep track of the xpi built and uploaded by extension sourceDir.\n      this.buildAndPushExtensions(),\n\n      // Wait for RDP unix socket file created and\n      // Create an ADB forward connection on a free tcp port\n      this.adbDiscoveryAndForwardRDPUnixSocket(),\n    ]);\n\n    // Connect to RDP socket on the local tcp server, install all the pushed extension\n    // and keep track of the built and installed extension by extension sourceDir.\n    await this.rdpInstallExtensions();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Android';\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n            `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.buildAndPushExtension(extensionSourceDir);\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n    } = this;\n\n    this.exiting = true;\n\n    // If a Firefox for Android instance has been started,\n    // we should ensure that it has been stopped when we exit.\n    await this.adbForceStopSelectedPackage();\n\n    if (selectedArtifactsDir) {\n      log.debug('Cleaning up artifacts directory on the Android device...');\n      await adbUtils.clearArtifactsDir(selectedAdbDevice);\n    }\n\n    // Call all the registered cleanup callbacks.\n    for (const fn of this.cleanupCallbacks) {\n      try {\n        fn();\n      } catch (error) {\n        log.error(error);\n      }\n    }\n  }\n\n  // Private helper methods.\n\n  getDeviceProfileDir(): string {\n    return `${this.selectedArtifactsDir}/profile`;\n  }\n\n  printIgnoredParamsWarnings() {\n    if (this.params.profilePath) {\n      log.warn(\n        'Firefox for Android target does not support custom profile paths.'\n      );\n    }\n\n    if (this.params.keepProfileChanges) {\n      log.warn(\n        'Firefox for Android target does not support --keep-profile-changes.'\n      );\n    }\n\n    if (this.params.browserConsole) {\n      log.warn(\n        'Firefox for Android target does not support --browser-console option.'\n      );\n    }\n\n    if (this.params.preInstall) {\n      log.warn(\n        'Firefox for Android target does not support --pre-install option.'\n      );\n    }\n\n    if (this.params.startUrl) {\n      log.warn(\n        'Firefox for Android target does not support --start-url option.'\n      );\n    }\n  }\n\n  async adbDevicesDiscoveryAndSelect() {\n    const {adbUtils} = this;\n    const {adbDevice} = this.params;\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await adbUtils.discoverDevices();\n\n    if (devices.length === 0) {\n      throw new UsageError(\n        'No Android device found through ADB. ' +\n        'Make sure the device is connected and USB debugging is enabled.'\n      );\n    }\n\n    if (!adbDevice) {\n      const devicesMsg = devices.map((dev) => ` - ${dev}`).join('\\n');\n      log.info(`\\nAndroid devices found:\\n${devicesMsg}`);\n      throw new UsageError(\n        'Select an android device using --android-device=<name>');\n    }\n\n    const foundDevices = devices.filter((device) => {\n      return device === adbDevice;\n    });\n\n    if (foundDevices.length === 0) {\n      const devicesMsg = JSON.stringify(devices);\n      throw new UsageError(\n        `Android device ${adbDevice} was not found in list: ${devicesMsg}`);\n    }\n\n    this.selectedAdbDevice = foundDevices[0];\n    log.info(`Selected ADB device: ${this.selectedAdbDevice}`);\n  }\n\n  async apkPackagesDiscoveryAndSelect() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      params: {\n        firefoxApk,\n      },\n    } = this;\n    // Discovery and select a Firefox for Android version.\n    const packages = await adbUtils.discoverInstalledFirefoxAPKs(\n      selectedAdbDevice\n    );\n\n    if (packages.length === 0) {\n      throw new UsageError(\n        'No Firefox packages were found on the selected Android device');\n    }\n\n    const pkgsListMsg = (pkgs) => {\n      return pkgs.map((pkg) => ` - ${ pkg}`).join('\\n');\n    };\n\n    if (!firefoxApk) {\n      log.info(`\\nPackages found:\\n${pkgsListMsg(packages)}`);\n\n      if (packages.length > 1) {\n        throw new UsageError('Select one of the packages using --firefox-apk');\n      }\n\n      // If only one APK has been found, select it even if it has not been\n      // specified explicitly on the comment line.\n      this.selectedFirefoxApk = packages[0];\n      log.info(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n      return;\n    }\n\n    const filteredPackages = packages.filter((line) => line === firefoxApk);\n\n    if (filteredPackages.length === 0) {\n      const pkgsList = pkgsListMsg(filteredPackages);\n      throw new UsageError(\n        `Package ${firefoxApk} was not found in list: ${pkgsList}`\n      );\n    }\n\n    this.selectedFirefoxApk = filteredPackages[0];\n    log.debug(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n  }\n\n  async adbForceStopSelectedPackage() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.info(`Stopping existing instances of ${selectedFirefoxApk}...`);\n    await adbUtils.amForceStopAPK(selectedAdbDevice, selectedFirefoxApk);\n  }\n\n  async adbCheckRuntimePermissions() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.debug(`Discovering Android version for ${selectedAdbDevice}...`);\n\n    const androidVersion = await adbUtils.getAndroidVersionNumber(\n      selectedAdbDevice\n    );\n\n    if (typeof androidVersion !== 'number' || Number.isNaN(androidVersion)) {\n      throw new WebExtError(`Invalid Android version: ${androidVersion}`);\n    }\n\n    log.debug(`Detected Android version ${androidVersion}`);\n\n    if (androidVersion < 23) {\n      return;\n    }\n\n    log.debug('Checking read/write permissions needed for web-ext' +\n              `on ${selectedFirefoxApk}...`);\n\n    // Runtime permission needed to be able to run Firefox on a temporarily created profile\n    // on android versions >= 23 (Android Marshmallow, which is the first version where\n    // these permissions are optional and have to be granted explicitly).\n    await adbUtils.ensureRequiredAPKRuntimePermissions(\n      selectedAdbDevice, selectedFirefoxApk, [\n        'android.permission.READ_EXTERNAL_STORAGE',\n        'android.permission.WRITE_EXTERNAL_STORAGE',\n      ]\n    );\n  }\n\n  async adbPrepareProfileDir() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxApp,\n      },\n    } = this;\n    // Create the preferences file and the Fennec temporary profile.\n    log.debug(`Preparing a temporary profile for ${selectedFirefoxApk}...`);\n\n    const profile = await firefoxApp.createProfile({app: 'fennec'});\n\n    // Choose a artifacts dir name for the assets pushed to the\n    // Android device.\n    this.selectedArtifactsDir = await adbUtils.getOrCreateArtifactsDir(\n      selectedAdbDevice\n    );\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    await adbUtils.runShellCommand(selectedAdbDevice, [\n      'mkdir', '-p', deviceProfileDir,\n    ]);\n    await adbUtils.pushFile(selectedAdbDevice,\n                            path.join(profile.profileDir, 'user.js'),\n                            `${deviceProfileDir}/user.js`);\n\n    log.debug(`Created temporary profile at ${deviceProfileDir}.`);\n  }\n\n  async adbStartSelectedPackage() {\n    const {\n      adbUtils,\n      selectedFirefoxApk,\n      selectedAdbDevice,\n    } = this;\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    log.info(`Starting ${selectedFirefoxApk}...`);\n\n    log.debug(`Using profile ${deviceProfileDir}`);\n\n    await adbUtils.startFirefoxAPK(\n      selectedAdbDevice, selectedFirefoxApk, deviceProfileDir\n    );\n  }\n\n  async buildAndPushExtension(sourceDir: string) {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n      params: {\n        buildSourceDir,\n      },\n    } = this;\n\n    await withTempDir(async (tmpDir) => {\n      const {extensionPath} = await buildSourceDir(sourceDir, tmpDir.path());\n\n      const extFileName = path.basename(extensionPath, '.zip');\n\n      let adbExtensionPath = this.adbExtensionsPathBySourceDir.get(sourceDir);\n\n      if (!adbExtensionPath) {\n        adbExtensionPath = `${selectedArtifactsDir}/${extFileName}.xpi`;\n      }\n\n      log.debug(`Uploading ${extFileName} on the android device`);\n\n      await adbUtils.pushFile(\n        selectedAdbDevice, extensionPath, adbExtensionPath\n      );\n\n      log.debug(`Upload completed: ${adbExtensionPath}`);\n\n      this.adbExtensionsPathBySourceDir.set(sourceDir, adbExtensionPath);\n    });\n  }\n\n  async buildAndPushExtensions() {\n    for (const {sourceDir} of this.params.extensions) {\n      await this.buildAndPushExtension(sourceDir);\n    }\n  }\n\n  async adbDiscoveryAndForwardRDPUnixSocket() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxAndroidTimeout,\n      },\n    } = this;\n\n    const stdin = this.params.stdin || process.stdin;\n\n    const {\n      unixSocketDiscoveryRetryInterval,\n    } = FirefoxAndroidExtensionRunner;\n\n    let {\n      unixSocketDiscoveryMaxTime,\n    } = FirefoxAndroidExtensionRunner;\n\n    if (typeof firefoxAndroidTimeout === 'number') {\n      unixSocketDiscoveryMaxTime = firefoxAndroidTimeout;\n    }\n\n    const handleCtrlC = (str, key) => {\n      if (key.ctrl && key.name === 'c') {\n        adbUtils.setUserAbortDiscovery(true);\n      }\n    };\n\n    // TODO: use noInput property to decide if we should\n    // disable direct keypress handling.\n    if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n      readline.emitKeypressEvents(stdin);\n      stdin.setRawMode(true);\n\n      stdin.on('keypress', handleCtrlC);\n    }\n\n    try {\n      // Got a debugger socket file to connect.\n      this.selectedRDPSocketFile = (\n        await adbUtils.discoverRDPUnixSocket(\n          selectedAdbDevice, selectedFirefoxApk, {\n            maxDiscoveryTime: unixSocketDiscoveryMaxTime,\n            retryInterval: unixSocketDiscoveryRetryInterval,\n          }\n        )\n      );\n    } finally {\n      if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n        stdin.removeListener('keypress', handleCtrlC);\n      }\n    }\n\n    log.debug(`RDP Socket File selected: ${this.selectedRDPSocketFile}`);\n\n    const tcpPort = await this.chooseLocalTcpPort();\n\n    // Log the choosen tcp port at info level (useful to the user to be able\n    // to connect the Firefox DevTools to the Firefox for Android instance).\n    log.info(`You can connect to this Android device on TCP port ${tcpPort}`);\n\n    await adbUtils.setupForward(\n      selectedAdbDevice,\n      `localfilesystem:${this.selectedRDPSocketFile}`,\n      `tcp:${tcpPort}`\n    );\n\n    this.selectedTCPPort = tcpPort;\n  }\n\n  chooseLocalTcpPort(): Promise<number> {\n    return new Promise((resolve) => {\n      const srv = net.createServer();\n      // $FLOW_FIXME: flow has his own opinions on this method signature.\n      srv.listen(0, () => {\n        const freeTcpPort = srv.address().port;\n        srv.close();\n        resolve(freeTcpPort);\n      });\n    });\n  }\n\n  async rdpInstallExtensions() {\n    const {\n      selectedTCPPort,\n      params: {\n        extensions,\n        firefoxClient,\n      },\n    } = this;\n\n    const remoteFirefox = this.remoteFirefox = await firefoxClient({\n      port: selectedTCPPort,\n    });\n\n    // Exit and cleanup the extension runner if the connection to the\n    // remote Firefox for Android instance has been closed.\n    remoteFirefox.client.on('end', () => {\n      if (!this.exiting) {\n        log.info('Exiting the device because Firefox for Android disconnected');\n        this.exit();\n      }\n    });\n\n    // Install all the temporary addons.\n    for (const extension of extensions) {\n      const {sourceDir} = extension;\n      const adbExtensionPath = this.adbExtensionsPathBySourceDir.get(\n        sourceDir\n      );\n\n      if (!adbExtensionPath) {\n        throw new WebExtError(\n          `ADB extension path for \"${sourceDir}\" was unexpectedly empty`\n        );\n      }\n\n      const addonId = await (\n        remoteFirefox.installTemporaryAddon(adbExtensionPath)\n          .then((installResult: FirefoxRDPResponseAddon) => {\n            return installResult.addon.id;\n          })\n      );\n\n      if (!addonId) {\n        throw new WebExtError(\n          'Received an empty addonId from ' +\n          `remoteFirefox.installTemporaryAddon(\"${adbExtensionPath}\")`\n        );\n      }\n\n      this.reloadableExtensions.set(extension.sourceDir, addonId);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-android.js","module.exports = require(\"net\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"net\"\n// module id = 170\n// module chunks = 0","module.exports = require(\"tmp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tmp\"\n// module id = 171\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport defaultAddonSigner from 'sign-addon';\n\nimport defaultBuilder from './build';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {withTempDir} from '../util/temp-dir';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const extensionIdFile = '.web-extension-id';\n\n// Sign command types and implementation.\n\nexport type SignParams = {|\n  apiKey: string,\n  apiProxy: string,\n  apiSecret: string,\n  apiUrlPrefix: string,\n  artifactsDir: string,\n  id?: string,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  timeout: number,\n  verbose?: boolean,\n|};\n\nexport type SignOptions = {\n  build?: typeof defaultBuilder,\n  signAddon?: typeof defaultAddonSigner,\n  preValidatedManifest?: ExtensionManifest,\n  shouldExitProgram?: boolean,\n};\n\nexport type SignResult = {|\n  success: boolean,\n  id: string,\n  downloadedFiles: Array<string>,\n|};\n\nexport default function sign(\n  {\n    apiKey,\n    apiProxy,\n    apiSecret,\n    apiUrlPrefix,\n    artifactsDir,\n    id,\n    ignoreFiles = [],\n    sourceDir,\n    timeout,\n    verbose,\n  }: SignParams,\n  {\n    build = defaultBuilder,\n    preValidatedManifest,\n    signAddon = defaultAddonSigner,\n  }: SignOptions = {}\n): Promise<SignResult> {\n  return withTempDir(\n    async function(tmpDir) {\n      await prepareArtifactsDir(artifactsDir);\n\n      let manifestData;\n\n      if (preValidatedManifest) {\n        manifestData = preValidatedManifest;\n      } else {\n        manifestData = await getValidatedManifest(sourceDir);\n      }\n\n      const [buildResult, idFromSourceDir] = await Promise.all([\n        build({sourceDir, ignoreFiles, artifactsDir: tmpDir.path()},\n              {manifestData, showReadyMessage: false}),\n        getIdFromSourceDir(sourceDir),\n      ]);\n\n      const manifestId = getManifestId(manifestData);\n\n      if (id && manifestId) {\n        throw new UsageError(\n          `Cannot set custom ID ${id} because manifest.json ` +\n          `declares ID ${manifestId}`);\n      }\n      if (id) {\n        log.debug(`Using custom ID declared as --id=${id}`);\n      }\n\n      if (manifestId) {\n        id = manifestId;\n      }\n\n      if (!id && idFromSourceDir) {\n        log.info(\n          `Using previously auto-generated extension ID: ${idFromSourceDir}`);\n        id = idFromSourceDir;\n      }\n\n      if (!id) {\n        log.warn('No extension ID specified (it will be auto-generated)');\n      }\n\n      const signingResult = await signAddon({\n        apiKey,\n        apiSecret,\n        apiUrlPrefix,\n        apiProxy,\n        timeout,\n        verbose,\n        id,\n        xpiPath: buildResult.extensionPath,\n        version: manifestData.version,\n        downloadDir: artifactsDir,\n      });\n\n      if (signingResult.id) {\n        await saveIdToSourceDir(sourceDir, signingResult.id);\n      }\n\n      // All information about the downloaded files would have\n      // already been logged by signAddon().\n      if (signingResult.success) {\n        log.info(`Extension ID: ${signingResult.id}`);\n        log.info('SUCCESS');\n      } else {\n        log.info('FAIL');\n        throw new WebExtError(\n          'The extension could not be signed');\n      }\n\n      return signingResult;\n    }\n  );\n}\n\n\nexport async function getIdFromSourceDir(\n  sourceDir: string\n): Promise<string | void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n\n  let content;\n\n  try {\n    content = await fs.readFile(filePath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`No ID file found at: ${filePath}`);\n      return;\n    }\n    throw error;\n  }\n\n  let lines = content.toString().split('\\n');\n  lines = lines.filter((line) => {\n    line = line.trim();\n    if (line && !line.startsWith('#')) {\n      return line;\n    }\n  });\n\n  const id = lines[0];\n  log.debug(`Found extension ID ${id} in ${filePath}`);\n\n  if (!id) {\n    throw new UsageError(`No ID found in extension ID file ${filePath}`);\n  }\n\n  return id;\n}\n\n\nexport async function saveIdToSourceDir(\n  sourceDir: string, id: string\n): Promise<void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n  await fs.writeFile(filePath, [\n    '# This file was created by https://github.com/mozilla/web-ext',\n    '# Your auto-generated extension ID for addons.mozilla.org is:',\n    id.toString(),\n  ].join('\\n'));\n\n  log.debug(`Saved auto-generated ID ${id} to ${filePath}`);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/sign.js","module.exports = require(\"sign-addon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sign-addon\"\n// module id = 173\n// module chunks = 0","/* @flow */\nimport defaultUrlOpener from 'open';\n\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\ntype DocsParams = {\n  noInput?: boolean,\n  shouldExitProgram?: boolean,\n}\n\ntype DocsOptions = {\n  openUrl?: typeof defaultUrlOpener,\n}\n\nexport const url = 'https://developer.mozilla.org/en-US/Add-ons' +\n  '/WebExtensions/Getting_started_with_web-ext';\n\nexport default function docs(\n  params: DocsParams, {openUrl = defaultUrlOpener}: DocsOptions = {}\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    openUrl(url, (error) => {\n      if (error) {\n        log.debug(`Encountered an error while opening URL ${url}`, error);\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/docs.js","module.exports = require(\"open\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"open\"\n// module id = 175\n// module chunks = 0","/* @flow */\nimport defaultUpdateNotifier from 'update-notifier';\n\ntype CheckForUpdatesParams = {|\n  version: string,\n  updateNotifier?: typeof defaultUpdateNotifier,\n|};\n\nexport function checkForUpdates(\n  {\n    version,\n    updateNotifier = defaultUpdateNotifier,\n  }: CheckForUpdatesParams\n) {\n  const pkg = {name: 'web-ext', version};\n\n  updateNotifier({\n    pkg,\n    updateCheckInterval: 1000 * 60 * 60 * 24 * 3, // 3 days,\n  }).notify();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/updates.js","module.exports = require(\"update-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"update-notifier\"\n// module id = 177\n// module chunks = 0","/* @flow */\nimport os from 'os';\nimport path from 'path';\n\nimport requireUncached from 'require-uncached';\nimport camelCase from 'camelcase';\nimport decamelize from 'decamelize';\n\nimport fileExists from './util/file-exists';\nimport {createLogger} from './util/logger';\nimport {UsageError, WebExtError} from './errors';\n\nconst log = createLogger(__filename);\n\ntype ApplyConfigToArgvParams = {|\n  // This is the argv object which will get updated by each\n  // config applied.\n  argv: Object,\n  // This is the argv that only has CLI values applied to it.\n  argvFromCLI: Object,\n  configObject: Object,\n  options: Object,\n  configFileName: string,\n|};\n\nexport function applyConfigToArgv({\n  argv,\n  argvFromCLI,\n  configObject,\n  options,\n  configFileName,\n}: ApplyConfigToArgvParams): Object {\n  let newArgv = {...argv};\n\n  for (const option of Object.keys(configObject)) {\n    if (camelCase(option) !== option) {\n      throw new UsageError(\n        `The config option \"${option}\" must be ` +\n        `specified in camel case: \"${camelCase(option)}\"`);\n    }\n\n    // A config option cannot be a sub-command config\n    // object if it is an array.\n    if (!Array.isArray(configObject[option]) &&\n      typeof options[option] === 'object' &&\n      typeof configObject[option] === 'object') {\n      // Descend into the nested configuration for a sub-command.\n      newArgv = applyConfigToArgv({\n        argv: newArgv,\n        argvFromCLI,\n        configObject: configObject[option],\n        options: options[option],\n        configFileName});\n      continue;\n    }\n\n    const decamelizedOptName = decamelize(option, '-');\n\n    if (typeof options[decamelizedOptName] !== 'object') {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `an unknown option: \"${option}\"`);\n    }\n    if (options[decamelizedOptName].type === undefined) {\n      // This means yargs option type wasn't not defined correctly\n      throw new WebExtError(\n        `Option: ${option} was defined without a type.`);\n    }\n\n    const expectedType = options[decamelizedOptName].type ===\n      'count' ? 'number' : options[decamelizedOptName].type;\n\n    const optionType = (\n      Array.isArray(configObject[option]) ?\n        'array' : typeof configObject[option]\n    );\n\n    if (optionType !== expectedType) {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `the type of \"${option}\" incorrectly as \"${optionType}\"` +\n        ` (expected type \"${expectedType}\")`);\n    }\n\n    let defaultValue;\n    if (options[decamelizedOptName]) {\n      if (options[decamelizedOptName].default !== undefined) {\n        defaultValue = options[decamelizedOptName].default;\n      } else if (expectedType === 'boolean') {\n        defaultValue = false;\n      }\n    }\n\n    // This is our best effort (without patching yargs) to detect\n    // if a value was set on the CLI instead of in the config.\n    // It looks for a default value and if the argv value is\n    // different, it assumes that the value was configured on the CLI.\n\n    const wasValueSetOnCLI =\n      typeof argvFromCLI[option] !== 'undefined' &&\n      argvFromCLI[option] !== defaultValue;\n    if (wasValueSetOnCLI) {\n      log.debug(\n        `Favoring CLI: ${option}=${argvFromCLI[option]} over ` +\n        `configuration: ${option}=${configObject[option]}`);\n      newArgv[option] = argvFromCLI[option];\n      continue;\n    }\n\n    newArgv[option] = configObject[option];\n\n    const coerce = options[decamelizedOptName].coerce;\n    if (coerce) {\n      log.debug(\n        `Calling coerce() on configured value for ${option}`);\n      newArgv[option] = coerce(newArgv[option]);\n    }\n  }\n  return newArgv;\n}\n\nexport function loadJSConfigFile(filePath: string): Object {\n  const resolvedFilePath = path.resolve(filePath);\n  log.debug(\n    `Loading JS config file: \"${filePath}\" ` +\n    `(resolved to \"${resolvedFilePath}\")`);\n  let configObject;\n  try {\n    configObject = requireUncached(resolvedFilePath);\n  } catch (error) {\n    log.debug('Handling error:', error);\n    throw new UsageError(\n      `Cannot read config file: ${resolvedFilePath}\\n` +\n      `Error: ${error.message}`);\n  }\n  if (Object.keys(configObject).length === 0) {\n    log.debug(`Config file ${resolvedFilePath} did not define any options. ` +\n      'Did you set module.exports = {...}?');\n  }\n  return configObject;\n}\n\ntype DiscoverConfigFilesParams = {|\n  getHomeDir: () => string,\n|};\n\nexport async function discoverConfigFiles(\n  {getHomeDir = os.homedir}: DiscoverConfigFilesParams = {}\n): Promise<Array<string>> {\n  const magicConfigName = 'web-ext-config.js';\n\n  // Config files will be loaded in this order.\n  const possibleConfigs = [\n    // Look for a magic hidden config (preceded by dot) in home dir.\n    path.join(getHomeDir(), `.${magicConfigName}`),\n    // Look for a magic config in the current working directory.\n    path.join(process.cwd(), magicConfigName),\n  ];\n\n  const configs = await Promise.all(possibleConfigs.map(\n    async (fileName) => {\n      const resolvedFileName = path.resolve(fileName);\n      if (await fileExists(resolvedFileName)) {\n        return resolvedFileName;\n      } else {\n        log.debug(\n          `Discovered config \"${resolvedFileName}\" does not ` +\n          'exist or is not readable');\n        return undefined;\n      }\n    }\n  ));\n\n  const existingConfigs = [];\n  configs.forEach((f) => {\n    if (typeof f === 'string') {\n      existingConfigs.push(f);\n    }\n  });\n  return existingConfigs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = require(\"require-uncached\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require-uncached\"\n// module id = 179\n// module chunks = 0","module.exports = require(\"decamelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"decamelize\"\n// module id = 180\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {isErrorWithCode} from '../errors';\n\ntype FileExistsOptions = {|\n  fileIsReadable: (filePath: string) => Promise<boolean>,\n|};\n\n/*\n * Resolves true if the path is a readable file.\n *\n * Usage:\n *\n * const exists = await fileExists(filePath);\n * if (exists) {\n *   // ...\n * }\n *\n * */\nexport default async function fileExists(\n  path: string,\n  {\n    fileIsReadable = (f) => fs.access(f, fs.constants.R_OK),\n  }: FileExistsOptions = {}\n): Promise<boolean> {\n  try {\n    await fileIsReadable(path);\n    const stat = await fs.stat(path);\n    return stat.isFile();\n  } catch (error) {\n    if (isErrorWithCode(['EACCES', 'ENOENT'], error)) {\n      return false;\n    }\n    throw error;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-exists.js"],"sourceRoot":""}